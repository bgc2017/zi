歷算全書卷五十二
宣城梅文鼎撰
三角法舉要卷三
内容外切(三角測量之用在邊與角而其内容外切亦所當明故次于算例之後)
内容有二曰本形曰他形
一三角求積
積謂之冪亦謂之面乃本形所有
一三角容員
一三角容方
以上皆形内所容之他形
外切惟一
一三角形外切之員
三角求積第一術
底與高相乘折半見積
内分二支
一句股形即以句股為底為高
一銳角鈍角形任以一邊為底而求其垂線為高
假如句股形甲乙股(一百二十尺)乙丙句(三十五尺)求積
術以甲乙股乙丙句相乘(四千二百尺)折半得積
凡求得句股形積二千一百尺
如圖甲乙股與乙丙句相乘成甲
乙丙丁長方形其形半實半虚故
折半見積
或以句折半(十七尺半)乘股亦得積(二千)
(一百尺)
如圖乙丙句折半於戊以乙戊乘
甲乙成甲乙戊丁形是移丙戊己
補甲丁己也
或以股折半(六十尺)乘句亦得積(二千)
(一百尺)
如圖甲乙股折半於己以己乙乘
乙丙成己乙丙丁形是移甲己戊
補戊丁丙也
右句股形以句為底以股為高若以股為底則句又
為高可互用也
句股形有立有平若平地句股以句為闊以股為長
其理無二
論曰凡求平積皆謂之冪其形如網目又似窗櫺之空
皆以横直相交如十字亦如機杼之有經緯而成布帛
故句股是其正法何也句股者方形斜剖之半也折半
則成正剖之半方形矣其他銳角鈍角或有直無横有
横無直必以法求之使成句股然後可算故句股者三
角法所依以立也
假如銳角形甲乙邊(二百三十二尺)甲丙邊(三百四十尺)乙丙邊(四百)
(六十八尺)求積
術先求垂線用銳角第三術任以
乙丙邊為底以甲丙甲乙為兩弦
兩弦之較數(一百零八尺)總數(五百七十二尺)
相乘(六萬一千七百七十六尺)為實以乙丙底
為法除之得數(一百三十二尺)轉減乙丙餘數(三百三十六尺)半之得
乙丁(一百六十八尺)依句股法以乙丁自乘(二萬八千二百二十四尺)與甲
乙自乘(五萬三千八百二十四尺)相減餘數(二萬五千六百尺)平方開之得
甲丁垂線(一百六十尺)以甲丁垂線折半乘乙丙底得積
凡求得銳角形積三萬七千四百四十尺
如圖移辛補壬移庚補癸則成長
方形即垂線折半乘底之積
右銳角形任以乙丙邊為底取垂
線求積若改用甲乙或甲丙邊為
底則所得垂線不同而得積無異故可以任用為底
假如鈍角形甲乙邊(五十八步)甲丙邊(八十五步)乙丙邊(三十三步)求積
術求垂線立於形外用鈍角第三
術以乙丙為底甲乙甲丙為兩弦
總數(一百四十三步)較數(二十七步)相乘(三千八百)
(六十一步)為實乙丙底為法除之得數
(一百一十七步)内減乙丙餘數(八十四步)折半
(四十二步)為乙丁(即乙丙引長邊)依句股法乙丁自乘(一千七百六十四步)甲
乙自乘(三千三百六十四步)相減餘數(一千六百步)平方開之得甲丁
(四十步)為形外垂線以乙丙底折半(十六步半)乘之得積
凡求得鈍角形積六百六十步
如圖甲乙丙鈍角形移戊補庚移
庚己補壬癸又移壬子補辛成辛
癸丑長方即乙丙底折半乘中長
甲丁之積
右鈍角形以乙丙為底故從甲角作垂線若以甲乙
為底則自丙角作垂線亦立形外而垂線不同然以
之求積並同若以甲丙為底從乙角作垂線則在形
内如銳角矣其垂線必又不同而其得積無有不同
故亦可任用一邊為底
凡用垂線之高乘底見積必其線上指天頂底線之
横下應地平兩線相交正如十字故其所乘之冪積
皆成小平方可以虚實相補而求其積數鈍角形引
長底線以作垂線立於形外則兩線相遇亦成十字
正方之角矣
總論曰三角形作垂線於内則分兩句股鈍角形作垂
線於外則補成句股皆句股法也
三角求積第二術
以中垂線乘半周得積謂之以量代算
假如鈍角形乙丙邊(五十八步)甲乙邊(一百一十七步)甲丙邊(八十五步)
求積
術平分甲乙兩角各作線會于心從
心作十字垂線至乙甲邊(如心庚)即中
垂線也乃量取中垂線(心庚)得數(一十八步)
合計三邊而半之(一百三十步)為半周以半周乘中垂線得積
凡求得鈍角形積二千三百四十步
又術如前取中垂線(心庚)為闊半周為
長(如乙癸及丁壬)别作一長方形(如乙壬丁癸)即
與(甲乙丙)鈍角形等積
解曰凡自形心作垂線至各邊皆等故中垂線乘半周
為一切有法之形所公用方員及五等面六等面至十
等面以上並同故以中垂線為闊半周為長其所作長
方形即與三角形等積
又解曰中垂線至邊皆十字正方角即分各邊成句股
形以乘半周得積即句股相乘折半之理
附分角術有甲角欲平分之
術以甲角為心作虚半規截角旁兩
線得辛壬二點乃自辛自壬各用為
心作弧線相遇于癸作癸甲線即分
此角為兩平分
三角求心術
如上分角術於甲角平分之于乙角
又平分之兩平分之線必相遇成一
點此一點即三角形之心
解曰試再於丙角如上法分之則亦
必相遇於原點
三角求積第三術
以三較連乘又乘半總開方見積
假如鈍角形甲乙邊(一百一十六尺)甲丙邊(一百七十尺)乙丙邊(二百)
(三十四尺)求積
術合計三邊而半之(二百六十尺)為半總
以與甲乙邊相減得較(一百四十四尺)與甲
丙邊相減得較(九十尺)與乙丙邊相減
得較(二十六尺)三較連乘(以兩較相乘得數又以餘一較)
(乘之也)得數(三十三萬六千九百六十尺)又以半總較之得數(八千七百六十)
(萬零九千六百尺)平方開之得積
凡求得鈍角形積九千三百六十尺
若係銳角同法
解曰此亦中垂線乘半周之理但所得為冪乘冪之數
故開方見積詳或問
三角容員第一術
以弦與句股求容員徑(此術惟句股形有之凡句股相併為和以和與弦併為弦)
(和和以和與弦相减為弦和較)
假如(甲乙丙)句股形甲丙句(二十步)乙甲股(二十一步)乙丙弦
(二十九步)求容員徑
術以句股和(四十一步)與弦相減得數為容員徑
凡求得内容員徑一十二步
解曰此以弦和較為容員徑
如圖從容員心作半徑至邊又作
分角線至角成六小句股形則各
角旁之兩線相等(如丙戊丙庚兩線在丙角旁則)
(相等乙庚乙己在乙角旁甲戊甲己在甲角旁並兩線相等)
其在正方角旁者(甲戊甲己)乃弦和較也(于乙丙弦内分丙庚以對丙戊又分)
(乙庚以對乙己則其餘為甲戊及甲己此即句股和與乙丙弦相較之數也)然即為内容員
徑何也各角旁兩線並自相等而正方角旁之兩線又
皆與容員半徑等(正方角旁兩小形之角皆平分方角之半則句股自相等而甲戊等心戊)
(甲己等心己)然則弦和較者正方角旁兩線(甲戊甲己)之合即容
員兩半徑(心戊心己)之合也故弦和較即容員徑也
試以甲戊為半徑作員則戊心亦
半徑而其全徑(癸戊甲)與容員徑(丁心)
(己)等以甲己為半徑作員則己心
亦半徑而其全徑(辛己甲)與容員徑
(戊心壬)亦等
三角容員第二術
以周與積求容員徑
内分二支
一句股形以弦和和為用(亦可用半)
一銳角鈍角形以全周半周為用
假如(甲乙丙)句股形甲丙句(一十六步)甲乙股(三十步)乙丙弦
(三十四步)求容員徑
術以句股相乘得數(四百八十步)為實併句股弦數(共八十步)為
法除之得數倍之為容員徑
凡求得容員徑一十二步
解曰此以弦和和除句股倍積得容員半徑也
如圖從容員心作對角線分其形為三(一甲心丙一甲心乙一丙心乙)
乃於甲丙句線兩端各引長之截子甲如乙甲股截丙
丑如丙乙弦則子丑線即弦和和也乃自員心作癸壬
直線與丑子平行兩端各聫之成長方又作辛丙線分
為三長方形其闊並如員半徑其長各如句如股如弦
而各為所分三小形之倍積(甲辛長方)
(如甲丙句之長而以心戊半徑為闊即為甲心丙分形之倍甲癸長)
(方如乙甲股之長而以同心己之半徑為闊即為乙心甲形之倍丙)
(壬長方如丙乙弦之長而以同心庚之半徑為闊即為乙心丙形之)
(倍)合之即為本形倍積與句股相
乘同也(句股相乘為倍積見求積條)故以弦和
和除句股相乘積得容員半徑
假如(甲乙丙)句股形甲丙句(八十八尺)甲乙股(一百零五尺)乙丙
弦(一百三十七尺)求容員徑
術以句股相乘而半之得積(四千六百二十尺)為實併句股弦
數而半之(一百六十五尺)為法除之得數倍之為容員徑
凡求得内容員徑五十六尺
解曰此以半周除句股形積而得容員半徑也(半周即弦和和)
(之半)
如圖從容員心分本形為六小句股則同角之句股各
相等可以合之而各成小方形(同甲角之)
(兩句股成丁己小方形同丙角之兩句股可合之成丁辛長方形以心辛)
(丙形等丙戊心也同乙角之兩句股可合之成己庚長方形以乙庚心形)
(等心戊乙也)乃移己庚長方為辛癸長方
則癸甲即同半周而癸己大長方即
為半周乘半徑而與句股積等也(六小形之句皆原形之周變為長方則兩)
(兩相得而各用其半是半周也癸甲及壬己之長並半周壬癸及己甲辛丙之間並同心丁是半周乘半徑也)
(辛癸長方與己庚等積即與乙角旁兩句股等積又丁辛長方與丙角旁兩句股等積再加丁己形即與原設)
(乙甲丙句股形等積矣)然則以句股相乘而半之者句股形積也
故以半周除之即容員半徑矣
或以弦和和除四倍積得容員全徑並同前論
論曰句股形古法以弦和較為容員徑與弦和和互相
乘除乃至精之理測員海鏡引伸其例以為測望之用
其變甚多三角容員盖從此出故為第一支
假如(甲乙丙)銳角形乙丙邊(五十六尺)甲丙邊(七十五尺)甲乙邊
(六十一尺)求容員徑
術以乙丙邊為底求得甲丁中長線(六十尺法見求積)以乘底
得數(三千三百六十尺)倍之(六千七百二十尺)為實合計三邊(共一百九十二)
(尺)為法除之得容員徑
凡求得内容員徑三十五尺
解曰此以全周除四倍積得容員
徑也
如圖自容員心作對角線分為
小三角形三各以員半徑為高
各邊為底若於各邊作長方而
各以邊為長半徑為闊必倍大
於各小三角形(如壬丙長方倍大于丙心乙形)
(丙丑長方倍大于丙心甲形甲丁長方倍大于甲心乙形)又
作加一倍之長方則四倍大於
各小三角(如未乙長方倍大于丙壬長方必四倍于)
(丙心乙三角則夘甲亦四倍于丙心甲而甲酉亦四倍于甲心乙)於是而通為一大長
方(移夘甲長方為亥丙移甲酉為乙辰則成亥午大長方形矣)必四倍原形之冪而
以三邊合數為長以容員之徑為闊然則以中長線乘
底而倍之者正為積之四倍也以三邊除之豈不即得
員徑乎
或以全周除倍積得容員半徑
或以半周除積得容員半徑並同
若鈍角形亦同上法
論曰銳角鈍角並以周為法此與句股形用弦和和同
但必先求中長線故為第二支
三角容員第三術
以中垂線為員半徑曰以量代算
假如(甲乙丙)三角形求容員徑(既不用算故不言邊角之數)
如求積術均分甲乙二角之度各
作虚線交於己即己為容員之心
次以己為心儘一邊為界運規作
員此員界必切三邊
於是從己心向三邊各作十字垂線必俱在切員之點
而等為員半徑知半徑知全徑矣(半徑各如己庚線)
論曰此容員心即三角形之心(故以容員半徑乘半總即得積也)
又案此術亦句股及銳鈍兩角通用
三角容員第四術
用三較連乘
假如(甲乙丙)鈍角形乙丙邊(四百三十二尺)甲丙邊(五百尺)甲乙
邊(一百四十八尺)求容員徑
術以半總(五百四十尺)求得乙丙邊較
(一百八尺)甲丙邊較(四十尺)乙甲邊較
(三百九十二尺)三較連乘得數(一百六十九萬三千)
(四百四十尺)以半總除之得數(三千一百三十)
(六尺)四因之(一萬二千五百四十四尺)為實平方開之得容員徑
凡求得内容員徑一百一十二尺
銳角同法
解曰此所得者為容員徑上之自乘方冪故開方得徑
三角容方第一術
合底與高除倍積得容方徑
内分二支
一句股形即以句股為底為高(即句股和也其容方依正方角)
一三角形以一邊為底求其垂線為高(句股形以弦為底銳)
(角形三邊皆可為底鈍角形以大邊為底其容方並依為底之邊)
假如(甲乙丙)句股形甲丙股(三十六尺)乙丙句(一十八尺)求容方
依正方角而以容方之一角切於弦
術以句股相乘得數(六百四十八尺)為實以句股和(五十四尺)為法
除之得所求
求到内容方徑一十二尺
如圖作寅乙線與股平行作寅甲
線與句平行成寅丙長方為句股
形倍積
次引寅甲線横出截之於癸引乙
丙句横出截之於夘使引出兩線
(甲癸及丙夘)皆如甲丙股仍作夘癸線聫之
乃從癸作斜線至乙割甲丙股於戊則戊丙為所求容
方之邊又從戊作申未横線與上下兩線平行割甲乙
弦於己則己戊為所求容方之又一邊末從己作午辛
立線割丙乙句於辛則己辛及辛丙又為兩對邊而四
邊相等為句股形内所容之方
解曰寅夘大長方以癸乙斜線分兩句股則相等而寅
戊與戊夘兩長方等則寅丙長方與申夘長方亦等(寅丙)
(内减寅戊而加相等之戊夘即成申夘)夫寅丙者句股倍積而申夘者句
股和乘容方徑也(乙丙句丙夘股合之為申夘形之長申乙及未夘並同方徑為闊)故
以句股和除倍積得容方徑
又解曰寅丙長方分兩句股而等則寅戊與午丙兩長
方等(寅己與己丙既等則于寅戊内减寅己而加相等之己丙即成午丙)而寅戊原等戊
夘則午丙亦與戊夘等夫午丙形之丙甲與戊夘形之
丙夘皆股也則兩形等積又等邊矣其長等其闊亦等
(甲丙與丙夘既等則辛丙與戊丙亦等)而對邊悉等即成正方形
論曰此以句為底股為高也若以股為底句為高所得
亦同其容方依正方角乃古法也三角以底闊合中長
除積盖生於此是為第一術之第一支
假如(甲乙丙)句股形乙丙弦二十八尺其積一百六十
八尺求容方依弦線而以容方之兩角切於句股
術以弦除倍積(三百三十六尺)得對角線(一十二尺)與弦相併(四十尺)
為法倍積為實法除實得所求
求到容方徑八尺四寸
如圖作寅丑線與乙丙弦平行又作
寅丙及丑乙與甲丁對角線平行成
丑丙長方為句股形倍積
次引乙丙弦至夘引寅丑線至癸使
癸丑及夘乙並同甲丁仍作癸夘線
聫之
次從癸向丙作斜線割丑乙線於子遂從子作申未線
與乙丙弦平行割甲乙股於庚割甲丙句於己則庚己
為容方之一邊末從庚作辰壬線從己作午辛線並與
甲丁平行而割乙丙弦於壬於辛則辛壬及庚壬及己
辛三線並與庚己等而成正方
解曰寅子長方與子夘長方等積(癸丙線分寅夘形為兩句股而等則兩句)
(股内所作之方必等)午壬長方又與寅子等(寅丁形以甲丙線分為兩句股則寅己與)
(己丁等又丑丁形以甲乙線分為兩句股則丑庚與丁庚等若移寅己作己丁移丑庚作丁庚則午丁等寅戊)
(而辰丁等丑戊合之而午壬等寅子)則午壬亦與子夘等而午壬之邊(午辛)
(及辰壬)子夘之邊(夘乙及未子)並等甲丁對角線則兩形(午壬子夘)
等積又等邊矣其長等其闊亦等(辰壬既等夘乙則辛壬亦等子乙而庚壬)
(及己辛亦不得不等)故四線必俱等也
又解曰寅子既與子夘等則寅乙必與申夘等(于寅乙内移寅)
(子居子夘之位即成申夘)而寅乙者倍積也申夘者底偕中長乘容
方徑也(乙丙弦也夘乙即甲丁對角中長線也合之為丙夘之長其兩端之闊申丙及未夘並同方徑)
故合弦與對角線為法以除倍積得容方徑
論曰此以一邊為底中長線為高也既以一邊為底其
容方即依此一邊而以兩方角切餘二邊也句股形故
以弦為底若銳角形則任以一邊為底但依大邊則容
方轉小亦如句股形依方角之容方必大於依弦線之
容方也鈍角形但可以大邊為底其求之則皆一法也
是為第一術之第二支
三角容方第二術
以圖算
内分二支
一以法截中長線得容方徑(句股形即截其邊)
一以法截兩斜邊得容方邊(句股形即截其弦)
假如銳角形求容方任以一邊為底
如圖以乙丙最小邊為底先從對角甲作中長垂線至
丁又從乙角作丑乙立線與甲丁平行而等乃從甲角
作横線過丑至癸截丑癸亦如甲
丁乃從癸向丙角作斜線割丑乙
立線於子末以子乙之度截中長
線(甲丁垂線)於戊即戊丁為容方之徑
(從戊作己庚又從己作線至辛從庚作線至壬成庚己辛壬即所求)
(容方)
解曰甲戊與戊丁若甲丁與乙丙(子丑癸句股與子乙丙形有子交角必相)
(似則丑子句與子乙句若丑癸股與乙丙股而丑子原與甲戊等子乙與戊丁等丑癸與甲丁等則甲戊與戊)
(丁亦若甲丁與乙丙)又甲戊與己庚若甲丁與乙丙(甲己庚三角為甲丙乙之)
(截形必相似則甲戊與己庚若甲丁與乙丙)
合兩比例觀之則甲戊與戊丁若甲戊與己庚而己庚
即戊丁
以上並銳角形
凡銳角三邊並可
為底而皆一法
假如句股形求容方以股為底則於句端甲作横線與
股平行而截之於癸使癸甲如甲乙句乃自癸向丙作
斜線割甲乙句於戊則戊乙即容方之一邊末作己戊
與股平行作己辛與句平行即成容方(或以句為底則從股端丙作丙)
(癸横線與股等亦作癸甲斜線割丙乙股於戊其所得容方亦同圖如左)
論曰銳角鈍角皆截中長線為容方徑句股形以弦為
底亦然惟句股形以句為底即截其股為容方徑(用股為底)
(即截句)不另求中長而與截中長之法並同是為第二術
之第一支
假如乙丙丁三角求容方依乙丙邊為底
如圖以乙丙底作正方形(即甲乙丙戊方)
又作丁辛對角線次作甲辛及戊
辛兩斜線割原形之兩斜線於己
於庚乃作己庚線為所求容方之
一邊(末作己壬及庚癸兩線成小方形於形内即所求)
解曰甲戊與己庚若子辛與午辛也(己庚辛三角形為甲戊辛之切形則)
(其横與直之比例相等)而甲戊與子辛同為方徑而等則己庚與
午辛亦同為小方徑而等
若底上方形大則其徑亦大於對
角線則如第二圖引丁辛線至子
其理亦同
有此二法則三邊並可為底
鈍角形用大邊為底句股形用弦為底並同第二圖
若句股形以句為底求容方如圖即用乙丙句作(丙辛庚乙)
方形從方角庚向丙作斜線割丁乙弦於壬從壬作癸
壬及甲壬二線即所容方(或用股上方則)
(引出句邊如股)
解曰庚丙線分丙角為兩平分則
其横直線自相等(壬癸與癸丙相等壬甲與甲丙)
(相等則四線皆等)而成正方嘉禾陳䃤菴用分角法求容方與
此同理
論曰此皆以底上方形為法而得所求小方也故不論
頂之偏正其所得容方並同惟句股容方依正方角則
中長線與原邊合而為一法雖小異其用不殊是為第
二術之第二支
三角形外切平員第一術
句股形以弦為徑
假如甲乙丙句股形乙丙弦長四尺五寸二分求外切
員
術以弦折半取心得半徑二尺二寸六分其弦長四尺
五寸二分即外切平員全徑以平員周率三五五乘之
徑率一一三除之得員周一十四尺二寸
如圖乙丙員徑即句股形之弦折半於丁即員心也以
乙丁半徑為度從丁心運規作員
必過甲而句股形之角皆切員周
矣
論曰凡平員徑上從兩端各作直線至員周相會則成
正方角(如乙丙徑之兩端于丙于乙各作直線會于甲則甲角必為正角)而為句股形
(假令兩線相遇于庚即成庚乙丙句股形于辛亦然以其皆正角故也)故不問句股長短
而並以其弦為外切員之徑
又論曰徑一百一十三而周三百五十五此鄭端清世
子所述祖冲之術也(見律吕精義)按古率周三徑一李淳風
等釋古九章以為術從簡易舉大綱而言之誠為通論
諸家所傳徑五十周一百五十七則魏劉徽所改謂之
徽率徑七周二十二則祖冲之所定謂之密率由今以
觀冲之自有兩率(一為七與二十二一為一一三與三五五)盖以其捷者為
恒用之須而存其精者明測算之理亦可以觀古人之
用心矣
三角形外切平員第二術
分邊取員心内分二支並以圖算
一句股形但分一邊即得員心(其心在弦)
一銳角形鈍角形並分二邊可得員心(銳角形員心在形内)
(鈍角形員心在形外)
假如甲乙丙句股形求外切員
術任於句或股平分之作十字正線此線過弦線之點
即為員心
如圖甲乙丙形以甲乙股平分於
戊從戊作庚丁正十字線至乙丙
弦即分弦為兩平分而丁即員心
從丁運規作外切員則甲乙丙三
點並切員周而乙丁丙丁庚丁皆半徑
論曰若平分甲丙句於辛從辛作十字正線亦必至丁
故但任分其一邊即可得心
又論曰若依第一術先得丁心從丁心作直線與句平
行即此線能分股線為兩平分(如丁庚線與甲丙句平行過甲乙股即平分股)
(線于戊)若與股平行而分句線亦然(如丁辛線與甲乙股平行即分句線于辛)
右句股形外切平員之心在弦線中央
假如銳角形求形外切員
術任以兩邊各平分之作十字線引長之必相遇於一
點即為員心
如圖甲乙丙銳角形任以甲丙邊
平分之于戊作庚戊丁十字線又
任以乙丙邊平分之於壬作癸壬
丁十字線兩直線稍引長之相遇
於丁以丁為心作員則甲乙丙三角並切員周而丁癸
丁庚皆半徑
論曰試於餘一邊再平分之作十字正線亦必會於此
點故此點必員心(如甲乙邊再平分之于辛作子辛丁十字線亦必相遇于丁點)
右銳角形外切平員之心在形之内
假如鈍角形求形外切員術同銳角
如圖甲乙丙形甲為鈍角任分甲
丙於戊分甲乙於辛各作十字線
會於丁心從丁作員則丁庚丁癸
皆半徑而三角並切員周若用大
邊平分于壬作壬丁子線亦同
論曰試於丁心作線至丙至乙至甲必皆成員半徑與
丁庚丁癸同故丁為員心也
右鈍角形外切平員之心在形之外
總論曰此與容員之法不同何也内容員之心即三角
形之心故其半徑皆與各邊為垂線而不能平分其邊
然從心作線至角即能分各角為兩平分此分角求心
之法所由以立也外切員之心非三角形之心其心或
在形内或在形外距邊不等而能以十字線剖各邊為
兩平分此分邊求心之法所由以立盖即三點串員之
法也
附三點串員
有甲乙丙三點欲使之並在員周
術任以甲為心作虚員分用元度
以丙為心亦作虚員分兩員分相
交於戊於辛作戊辛直線又任以
乙為心以丙為心各作同度之虚員分相交於庚於壬
作庚壬直線兩直線相遇於丁以丁為心作員則三點
並在員周
員周有三點不知其心亦用此法
歷算全書卷五十二
