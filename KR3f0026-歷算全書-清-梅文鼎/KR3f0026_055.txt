歷算全書卷四十二
宣城梅文鼎撰
方程論卷三
致用
笇之用惟捷其說惟詳詳說之斯能捷用省笇列位諸
法由是以生也故致用次之
致用有二一者省笇一者列位(例襍見諸卷中故不具列而備論其理)
省算法亦有二一者行有空則省算一者數偶同則
省乘
凡方程之法去繁就簡同者去之異者存之歸于一法
一實而已矣故三色以上有空位則可徑求
若三色方程無空位者必湏乘減得數變為二色以求
之此常法也若内有一行中空一位則以所空之位
列于首而先以其餘兩行不空者如法乘減得數即
重列之與原有空位者相對如二色方程也(以兩行無空者)
(相乘對減則減去一色惟餘二色其有空者原只二色故可相對如二色也)則省一笇(原法)
(乘減三次今只兩次故曰省一笇)
凡三色方程不論一行有空或兩行各有空或三行各
有空皆只省一算何也其各行中雖有空位而不相
對故也何以知其不相對若兩行有空而又相對則
徑可以二色算之矣即不成三色方程三色有空
例襍見前卷
凡四色五色以至多色有幾行空位者如上省算徑求
最為簡捷若中行無空則必如法乘減以五色變四
色四色變三色三色又變二色漸次求之不可徑求
而省算也今諸書所載皆其各位之有空者耳非通
法也而欲以此盡方程可乎
凡四色方程有乘減六次者常也若有一位空則省
一算一行中空兩位或兩行各空一位而相對則
省二算若一行空兩位又一行空一位則省三算
止矣或有四行中各空一位而不相對亦只省一
算而已何也惟首位空乃能省算若首位不空而空
在下數位則乘減之後自然補實不能省矣亦有
兩行各空兩位而只省二算者亦以空位相左乘後
補實耳故雖四行中各空兩位亦只省三算也
假如四色中有一行空兩位則將此無空之三行如法
乘減變為兩行又將此兩行如法乘併變為一行此
減餘一行却有二位恰興空兩位之行相對矣便以
重列如二色方程取之此最方程中要法而諸書未
及也故詳論之
若四色方程有兩行各空一位而又相對則將其無空
之兩行如法互乘而減去此不空之位變為一行與
空位之兩行同列如三色法而之尤為易見
其四色各行空兩位而省三算即今諸書中所載是也
可無更贅然但欲知其為省算方程而非常法耳
其四色無空乘減六次者竟無其式故誤以省算為常
然既明其理亦不必一一為式矣
凡五色方程無空則有乘減十次者常法也(五色變四色則有四)
(算四色又變三色則有三算三色又變二色則有二算二色又一算乃得法實合之為十算)故五
色而為四圖者亦常法也(原列一圖以減餘重列為四色而三色而二色又各)
(一圖合之為四圖)
若有空一位則省一算或空兩位而省二算(湏兩位空在一)
(行或兩行俱空首位乃可)空三位而省三算(湏空在一行或三行同空首位或一)
(行首位空一行首次兩空則可)空四位而省四算(湏一行空三位而一行又空一)
(位恰與空三位者同或二行俱空首位而一行又空首次兩位乃可或兩行俱空首次亦可)空
五位而省五算(湏兩行空首位而一行空首次三位或兩行空首次而一行空首位或一)
(行空首次而一行空首次三之位乃可)空六位而省六算(湏一行空首位一行)
(空首次一行空首次三行位乃可)
省至六算止矣六算以上雖多空位無關省算也
今諸書有載五色方程者皆其各行空三位者耳總計
之有空十五位而其為法亦必用四算然後得數則
所省者亦只六算而竟不知其為省算之法則習而
不察也
假如五色方程内只有行空三位法當以有空之三色列
于上而先以其無空之四行如法乘減變為四色者
三行又以乘減變為三色者二行又以乘減變為二
色者一行則恰與空位之行相對矣再乘減一次得
所求矣故曰省三算也(變四色時省一算變三色時省一算變二色時省一算共)
(省三算)
假如五色方程内有兩行各空二位而相對法當以有
空之二色列于首次而先以其無空之三行如法乘
減變為四色者二行又以乘減變為三色者一行則
恰與空位之兩行相對矣于是以三色法取之得所
求矣故曰省四算也(變四色時省二算變三色時亦省二算)
假如五色方程内有兩行空首位又一行空首次三之
三位法當以無空之兩行如法乘減變為四色者一
行則恰與空首位之兩行相對矣乃以原數兩行
減餘一行相並列之用相乘減變為三色者兩行又
相乘減變為二色者一行則又恰與空三位者相對
矣乃以原空三位者與減餘列而求之即得之矣
故曰省五算也(變四色時省三算變三色與二色又各省一算)
若五色方程内有兩行各空三位者即如一行空兩位
一行空三位也法以無空之三行先用乘減變為四
色者兩行又以乘減變為三色者一行則恰與空首
位次位者對矣取出原空兩位者與減餘列而求之
變為二色者一行又恰與空三位者相對矣又取出
與減餘列而求之即得所問故亦省五算也(變四色三色時)
(各省二算變二色時又省一算共五)其兩行雖各空三位而不相對故
也(若各空三位而相對即成二色方程矣)
若五色方程各行俱有空位不等要之省六算止矣省
六算者必一行空首位而省一算一行空首次而省
二算一行空首次三之位而省三算其餘空位必不
相對不能省算與無空同也
其法先以不空之兩行乘減得數變為四色與空首
位者相對又乘減變為三色與空首次者相對又乘
減變為二色與空三位者相對再乘減即得所求
諸列不能悉具智者反隅可也
論曰常與變相待而成告方方程省算而特詳其不省
之算者欲窮其變先得其常也
以上所論雖止五色引而伸之若六色七色八色九
色乃至多色其理一也
以常言之二色者一算三色者三算四色者
六算五色者十算六色者十五算七色者二
十一算八色者二十八算九色者三十六算
十色者四十五算十一色五十五算十二色者
六十六算
以空位言之三色者有省一算四色者有省一
算至三算五色者有省至六算六色者有省至
十算七色者省十五算八色有省二十一算
九色有省二十八算十色有省三十六算十一
色有省四十五算十二色有省五十五算
以省算所用而言之三色者有只用二算四色
者有只用三算五色有只用四算六色有只五
算七色有只六算八色有只七算九色有只
八算十色有只用九算十一色有只十算十
二色有只十一算
總而言之二色則只一算三色則有二算或三
算四色則有三算以至六算五色則有四算以
至于十算六色則有五算至十五算七色則自
六算至二十一算八算則自七算至二十八算
九色則自八算至三十六算十色則自九算至四
十五算十一色自十算至五十五算十二色則
自十一算至六十六算
擴而充之猶舉一隅耳然其法不外于和較與和較之
襍與變愚故不欲以四色五色等分為之目也必
如此則方程之法乃為通法若諸書所列四色者必
各行空二位五色必各空三位非通法也方程者所
以御襍糅正負也而必逓空相等乃可用算是法有
所不及而窮于問也豈古人立法之意哉
此以上論空位省算省算者乘減併俱省之也非
若省乘者但省互乘而不省減乘
凡方程互遍乘者取其首位齊同耳故乘減一次則少
一色以首位之齊同必減而盡也然亦有其首位之
數偶爾相同者法當徑以對減而省其互乘此雖省
其乘而不省其減併故與前論省算同而微異也
假如和數方程首位同則徑減矣若較數者又湏論
其正負之名同數矣而又同名徑對減矣同數
而不同名則更其一行之正負以相較而後減併焉
此要訣也不則首位雖減去而其下之同異淆則加
減皆誤矣
若和較襍者首位之數同亦必以較數首位之名名其
和數之一行而後減併之但省其互乘可也
以上論同數省乘
亦有首位數雖不同而可以分數相命者則以其分數
改其一行之數以從一行則首位齊同而可以對減
省其互乘焉可矣
若較數或和較襍皆如前法齊同其首位之名斯減
併無誤耳(較數首位同名則仍之異名者改一行以相從和較襍者以較首位之名名其和數)
(之一行)
假如兩首位為五與十是倍數也則半之盖五與十互
乘各得五十而其下諸數從之而溢矣今但以首位
十半之為五而其下諸數皆半之以相減併則五之
之行可無乘而數亦簡明殊散人懷也
若兩首位為二十與二是十之一也則以退位之法乘
之使二十之一行皆為十之一若為八為四亦倍
數也若為八與二是四之一也四除其八之行則
得矣若九與三則三之一也以三除九則亦三而
其一行皆三除之則可減倂矣然三除多有不盡不
如只以三因其三之行也若為五與三則六因其
五之行而退位五與二則四因退位五與四則
八因退位皆同若六十四與八則八之一也八除
其六十四之行猶互乘也若此類者不可枚舉得
其意者酌而用之可也尤要在首位之必同名
亦有不可強齊者如七與二九與四之類只用互乘
為無弊也省乘者為省事而設也強齊之反多事矣
此以上論分數省乘
此外又有不拘首位者但數同則徑以對減施之二色
為宜盖二色方程只湏減去一色其所餘即一法一
實矣然亦湏同名方可減去若異名者改而齊之可
也
假如較數方程其中一色同名而又同數徑減去矣若
但同數而不同名則更其一行之正負乃減去之
假如和較雜其中一色同數則以之為主使和數一行
皆與此一色同名乃減去之
若和較則不湏爾但同數者即減去之此二色捷法
合此三者省算之理備矣
問田糧七則起科甲有上田一畝上次田一畝輸糧七
斗乙有上田一畝上次四畝上中一畝糧一石八斗
丙有上次上中田各一畝糧五斗丁有上中田中田
各二畝糧五斗戊有中田三畝中次五畝中下五畝
已有中下八畝下田十三畝庚有中下田下田各十
畝皆糧五斗問各則若何
法曰此方程斷續法也以甲乙丙借作三色己庚借作
二色各如法求得田則則其中兩色自知
先以甲乙兩行徧互乘減去上田餘上次田三畝
上中田一畝糧一石一斗用與丙行乘減上
次田減盡餘上中田二畝為法糧四斗為實
法除實得二斗為上中田則例
就以上中田則減丙糧五斗餘三斗為上次田則例
以上次田則減甲糧七斗餘四斗為上田則例(以上三色)
(法也)
又以上中田則例乘丁田二畝得四斗以減丁糧五
斗餘一斗以二畝除之得五升為中田則例
又以戊中田三畝乘其則例得一斗五升以減戊糧
五斗餘三斗五升為戊田中次中下各五畝之共數
因此處斷而不属故又先求末兩行
再以二色法用己庚兩行如法遍乘減去中下田餘
下田五畝為法糧一斗為實法除實得二升為下
田則例(以八因庚行而退位省乘法也)
以庚下田十畝乘其則例得二斗以減庚糧五斗餘
三斗以中下田十畝除之得三升為中下田則例
(以上二色法也)
乃以戊中下田五畝乘其則例得一斗五升以減戊
中下中次共三斗五升餘二斗以戊中次五畝除
之得四升為中次田則例
計開上田每畝糧四斗上次田每畝糧三斗
上中田每畝糧二斗中田每畝糧五升
中次田每畝糧四升中下田每畝糧三升
下田每畝糧二升
論曰此雖七色因行中斷續即非七色借三色二色之
法知其首尾而中行亦見焉所省良多然非省乘其
勢則然也以其疑于省算也故附之其末
又有數偶相同不論三色四色但一減之後即得一法
一實者非省算也然亦省算之類故亦附錄一條以
見其例
假如縀紗絹不知價但云以縀一匹紗五匹易絹九匹
餘價二兩六錢又以縀二匹絹八匹易紗四匹餘價
六兩八錢又以縀三匹易紗六匹絹七匹少價一兩
二錢
畣曰縀每匹價銀三兩紗每匹一兩絹每匹六錢
法列位
因中左紗減盡只餘一色即以絹十九為法除十
一兩四錢得絹價每匹六錢以絹餘二十六匹乘
價得十五兩六錢同減負一兩六錢餘十四兩紗價
也以紗餘十四匹除之得紗價每匹一兩(用中右減餘得之)
以原左行紗六匹(價六兩)絹七匹(價四兩二錢)共價十兩
二錢同減負一兩二錢餘九兩縀三匹價也三除之
得縀價每匹三兩
論曰此方程之變例也一減之後即得其數若多色
方程除首位外有減盡者先雖無空而減餘重列即
成有空方程矣(例見本卷齊軍列陳條)
若三色俱減盡則不能成算或三色方程中左三色
俱減盡中右只減一色則所餘者二色而無相較乘
減無因不能别其二色亦不能成算也
假有問水銀三斤硃砂二斤共價四兩四錢又水銀九
斤硃砂六斤共價十三兩二錢問各價若干
畣曰此不可以方程算何也彼雖兩宗而其後一宗
之物價皆三倍于先一宗互乘之後必湏減盡故也
凡左行之物俱倍于右行或俱半俱四之一等互乘之
後得數齊同不能分核具如前論方程立法正以諸
物襍糅多寡錯居同異參伍而得其端倪也
又或三色方程而問只二宗則減餘仍有二色不能分
别故問三色必有三宗問四色必有四宗五色六色
以上悉同何也方乘立法乘減一次始能分去一色
若少一行則少一次乘減而不能得其一法一實矣
故行中可有空位而不可有空行
行中有空者分一行言之也若總列為圖則位皆無空
凡此皆治方程者所當知
知其有不可算斯無疑于算知其有必不可省斯善為
省矣
列位之法亦有二
一者更其上下之位以互求也或為省算之計
凡方程立法務湏首位齊同以便減去故每遍乘一次
則減去一色逓減之則一法一實矣今行中有空則
是不待遍乘而其一色已先減去也故取而列之于
上位則能省算不則上位不空而下反空則對位無
減補成不空而不能省算矣
其法于列位時覆視之有横列中空位多者取作首位
首位空一行則省一算矣
若首位原有空位而欲更定次位者不必改列但于重
列減餘時檢點更定之可也
又横列中有數偶相同或可以分相命者取作首位亦
省遍乘或横列中有单一數多者取作首位省乘(单一)
(數則不湏乘故也)
以上論上下之位
一者更其前後之行也
凡首位多空而其不空者隔遠則更而聯之便乘減也
其各行空位不等者不必更列但以與減餘相對
者取出對列而乘減之(例見前諸卷)
若各行首位有可以分相命或數偶相同而為他行所
隔亦可更置使之相接
又多色方程有各行中對位總空者取出另列而先乘
其他行之不空者乃于重列之時漸次添入可免細
書跼蹐(例見後卷)
以上論前後之行
法曰凡多色方程先任意列位竟乃覆視之若首位有
空而下則無之此不必更置也或首位多空而下則
少亦不必更置也
惟首位不空而下反有或首位空少而下反多則更
而置之故上下可以互居前後亦可易位或云以末
行為主者非也
問古今歷術屢更其所用日法無一同者如以漢太初
歷日法十有一外加四十九則如殷歷日法也若以
太初日法二殷歷日法三再加五十八則如唐大衍
歷日法也若太初日法十有四大衍日法二相並以
比宋紀元歷日法仍少七十六若太初日法九十倍
之即紀元日法其各數若干
法以正負列位
甲太初十一(正)殷七一(負)負四十九
乙太初二(正)殷六三(正)大衍一(負)負五十八
丙太初十四(正)大衍二(正)紀元一(負)負七十六
丁太初九十(正)紀元一(負)適足
如右圖太初歷横列皆滿須用遍乘對減者三而後
能減去太初之一色其餘雖多空位自然有無減之
對位相補不能省算
如法改列
以最多不空之太初列下爲第四位則殷歷居上而
成有空位之方程矣
先如法以甲乙兩行互乘減併殷歷各正十五對減
盡大衍負一無減太初異併負三十五下數異併正
二百五(因異併故併從甲行之名而大衍在乙行與下數同名亦改負為正)
乃重列之(取出丙行與減餘相對)
如法互乘減倂大衍各正二對減盡紀元負一
無減太初異倂得正八十四下數異併得負四百
八十六
又重列之(以減餘與丁行相對)
首位同名同數省互乘紀元各負一對減盡太
初同減餘六為法負四百八十六無減為實法除
實得八十一分為太初日法以丁行太初九十乘
其日法(八十一分)得七千二百九十分為紀元日法以
甲行太初十一乘其日法(八十一分)得八百九十一異加負
四十九得九百四十分為殷歷日法以乙行殷歷
三乘日法(九百四十)得二千八百二十又太初二乘日法
得(一百六十二)又異加負(五十八)共得三千四十分為大
衍日法
計開
殷歷日法九百四十分
漢太初歷日法八十一分
唐大衍歷日法三千四十分
宋紀元歷日法七千二百九十分
又按列位之法原與省乘省算之法相生故共為一卷
合觀之可也今以六色無空者為例如後
問齊軍千乘其陳有先驅申驅為前軍有啟與胠為兩
翼有戎車貳廣為中軍有大殿為後軍各不知數但
以前軍居餘陳七之三合兩翼二廣與殿多餘陳四
十乘合前軍兩翼與中後較則多二十乘前軍合殿
與翼中軍較則少二十乘先驅大殿居與陳二之一
而少五乘各若干
畣曰前軍共三乘
内先驅一百四十乘
申驅一百六十乘
兩翼共二百一十乘
内啟與胠各一百五乘
中軍共三百乘
内戎車一百八十乘(帥)
貳廣一百二十乘(副)
後軍一百九十乘是為大殿
法以和較襍列位
有七之三二之一依變零為整以分母各乘而後列
之
如法互乘減倂變為五色有空而重列之
空者偶也若不空亦儼然變為五色矣
前三行減餘首位申驅皆空故不湏乘減但以末二
行乘而減之減去申驅即變四色矣又以申驅數本
同故不湏乘而竟以對減乃以四色法重列之
四色無空法也雖有空而非首位不能省算與無空
同
因首末兩行之翼數皆倍于中兩行故省互乘但以
首末兩行皆半之使其翼數齊同乃原數對減而變
為三色又重列之
因次行末行戎車同但首行多于次行二之一故省
互乘但以次行二分加一與首行對減其次行與末
行竟以原數對減變為二色而重列之
貳廣同故省互乘竟以對減盡大殿異名併得五
為法車同名減餘九百五十乘為實法除實得
一百九十乘為大殿車數以大殿車數異加正五
十乘共二百四十乘以貳廣二除之得一百二十乘
為二廣車數(用末次右行數)二乘大殿車數同減負二十
乘戎車二除之得一百八十乘為戎車公卒數(用第四次)
(三色中行數也)二乘戎車異加正六十乘兩翼二除之得
二百一十乘為兩翼共數(用第三次所列四色之次行)又半之即
啟與胠數合計兩翼(二百一十)戎車(一百八十)貳廣(一百二十)共
數(五百一十)同減負三十乘餘(四百八十)以申驅三除之得一
百六十乘為申驅數(用第二次所列五色之第四行)合計申驅(一百)
(六十)兩翼(二百一十)戎車(一百八十)貳廣(一百二十)共(六百七十)同減負十
乘餘(六百六十)又減去大殿二計(三百八十)餘(二百八十)以先驅二
除之得一百四十乘為先驅之數(用原列六色之第五行數)
試細攷之合計兩翼(二百一十)戎路(一百八十)貳廣(一百二十)大殿(一百)
(九十)共七百乘合計先驅(一百四十)申驅(一百六十)共三百乘三
七差分也故曰前軍為餘陣七之三
合計兩翼(二百一十)貳廣(一百二十)大殿(一百九十)共五百二十乘
其餘前軍(共三百)戎路(一百八十)共四百八十乘故曰翼廣
殿多餘陣四十乘
合計前軍(共三百)兩翼(二百一十)共五百一十乘以較中軍
(共三百)後殿(一百九十)共四百九十乘則多二十乘故正二
十乘與前軍翼同名
合計前軍(三百)大殿(一百九十)共四百九十乘以較兩翼(二百)
(一十)中軍(三百)共五百一十乘則少二十乘故負二十乘
與前軍殿異名合計先驅(一百四十)後殿(一百九十)共三百三
十乘又合計申驅(一百六十)中軍(三百)兩翼(二百一十)共六百七
十乘其二之一為三百三十五乘故曰先驅大殿居
餘陣二之一而少五乘(以全當其半而少五乘則以倍當其全而少十乘矣此與)
(第一行皆變零為整詳見帶分條)總計之則千乘矣故以和數參焉
論曰此一例中能兼數法皆省算之捷訣也
其第二圖五色變四色當有互乘減併者四次今以
申驅空位省其三次此空位徑求省算之法也
其申驅偶爾數同徑以對減與第五圖二色之貳廣
數同徑以對減皆省乘定法也但皆和較之襍故雖
不乘必以較行首位之正負補于和數之行不然則
減併誤矣此要訣也
其第三圖四色之首位偶有倍數故半其倍者以相
從此亦省乘法也
其第四圖三色之首位為三與二故加二為三是二
加一也故其下皆二分加一則如遍乘矣然亦首位
正負偶同也若不同者湏更其一行以同之首位雖
同數又必同名然後可減而去之尤省乘之要訣
又論曰方程無空者常法也如第一圖六色是也若不
減併五次何以求之亦偶而多有首位相同者故亦
能省乘然雖省乘不能省減併矣其有空位者偶然
也如第二圖五色有空是也空位多若更置列之所
省尤多雖不更置而減倂之餘自然能補其空亦可
見方程之有常法矣
若更置之則自五色起如後圖
因五色始有空也如此圖則省六算戎翼不空
故更之下位後行不空者更之前行以先乘
正負列位
甲乙行如法減去申驅以其餘四位重列之與丙行
相對(一和一較也)
重列
如法減去貳廣又重列之與丁行相對(皆較數也如後)
如法半減餘數以從丁行乃對減而重列之與戊行
相對(又以翼同故更置之)
上中下
如法徑以對減餘戎路五為法
倂得正負九百乘為實
法除實得戎路數
既得戎路數以次得餘重之數
合問
又術以一圖而為減併如後所列
依法先得戎路亦同但其間和較交變錯然襍陳非
深知猝不能了不如前術之為安穏明白也
歴算全書卷四十二
