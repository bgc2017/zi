歷算全書卷十
宣城梅文鼎撰
環中黍尺卷三之四
初數次數法(加減代乘除之法從初數次數而生故先論之)
(上卷之法用角旁兩正弦相乘今則兼用兩餘弦故别之為初數次數其法有二其一次數與對弧餘弦)
(相加其一相減也相加又有二一銳角一鈍角也相減有四或餘弦内減次數或次數内減餘弦而又各)
(分銳角鈍角也)
約法三邊求角
角求對邊
餘弦次數相加例(銳角法鈍角法各一)
丁乙丙形有三邊求乙銳角角旁大弧丁巳(正弦辛戊餘弦巳戊)
小弧丙乙(正弦丙癸餘弦巳癸)兩正弦相乘全數除之成初得
數戊庚又以兩餘弦相乘全數除之成次得數戊丑
(即卯巳)乃以次得數卯巳加對弧之餘弦已戌成卯戌(即申戊)
一初得數戊庚
二(次得數與對弧餘弦相并)申戊
三半徑亥已
四角之餘弦已乾
(以餘弦檢表得乙銳角之度)
若先有角求對邊則反之
一半徑亥巳
二角之餘弦巳乾
三初得數戊庚
四(次得數與對弧餘弦相并)申戊(以次得數戊丑減之得對弧餘弦丑申即巳戌)
論曰辛戊正弦與亥巳半徑同為乙丁弧所分則辛戊
全與丁戊分若亥巳全與乾巳分也而辛戊弦與丁戊
小弦又若戊庚句與申戊小句也故戊庚與申戊必若
亥巳與乾巳
若用丁甲丙形其算並同何以明之甲丁者乙丁半周
之餘甲丙者乙丙半周之餘其所用正弦並同又同用
丁丙為對角之弧甲角又同乙角皆以乾已為餘弦故
也
右係對邊小于象限角旁弧異類故其法用加而為
銳角
仍用前圖取丁甲寅三角形有三邊求甲鈍角角
兩旁弧同類對角邊大為寅丁其正弦酉戌餘弦戌
已旁弧丁甲其正弦辛戊餘弦已戊又旁弧寅甲
其正弦寅壬餘弦壬已初得數戊庚(半徑除兩正弦矩)次
得數卯巳(半徑除兩餘弦矩)
所用三率與前銳角形並同亦以卯已加已戌成申戊
為三率所得四率乾已亦為甲角之餘弦(末以餘弦檢表得度以減)
(半周餘為甲鈍角之度)
若先有甲鈍角求對邊丁寅則反用其率一半徑亥已二
甲角餘弦乾已三初數戊庚四申庚末以次數戊丑去
減得數甲戊餘丑申為對弧餘弦
論曰對弧寅丁係過弧與銳角形對弧丁丙相與為半
周之正餘度同用酉戌為正弦戌已為餘弦角旁弧丁
甲即乙丁半周之餘度同用辛戊為正弦戊已為餘弦
甲寅弧又與乙丙弧等度其正弦壬寅同癸丙餘弦壬
巳同癸巳故加減數並同所異者對弧大而兩旁弧又
同類故為鈍角
若用寅乙丁形其算並同以同用丁寅對弧而兩弧在
角旁者寅乙為寅甲半周之餘丁乙為丁甲半周之餘
所用之正弦餘弦並同故也甲角同乙角皆以乾已餘
弦度轉減半周為其度
右係對邊大于象限而角旁兩弧同類故其法用加
而為鈍角
正餘交變例
若角旁兩邊以象限相加減而用其餘弧則正弦餘弦
之名互易而所得初數次數不變三率之用亦不變
解曰弧小以減象限得餘弧弧大以象限減之而用其
餘亦餘弧也其故何也凡過弧與其減半周之餘度同
用一正弦故過弧内減象限之餘即反為過弧之餘弧
亦曰剰弧而此剰弧之正弦即過弧之餘弦也
若兩弧内一用餘度則其初數次數皆為正弦乘餘弦
半徑除之之數然其數不變何也一弧既用餘度則本
弧之正弦變為餘弧之餘弦而其又一弧仍係本度則
正弦不變然則先所用兩正弦相乘為初數者今不變
而為餘乘正乎次數倣此
試仍以前圖明之丁乙丙形任以乙角旁之乙丁弧(即辛)
(乙)内減去亥乙象弧其剰弧亥辛之正弦戊已即乙辛
過弧之餘弦也又亥辛之餘弦辛戊即過弧乙辛之正
弦也然則先以辛戊正弦乘丙癸正弦者今不變為辛
戊餘弦乘丙癸正弦乎然但變其名為餘乘正而辛戊
之數不變則其所得之初數戊庚亦不變也次數倣論
(按此法即測星時第二法所用)
若角旁兩弧俱改用餘弧則初數變為兩餘弦相乘次
數變為兩正弦相乘盖以正變餘餘變正而所得之初
數次數不變
試仍以前圖明之丁乙丙形乙角旁兩弧乙丁改用辛
亥(義見前)乙丙改用丙亥皆餘弧也則丙癸辛戊兩正弦
皆變餘弦(丙癸為丙亥弧餘弦辛戊為辛亥弧餘弦)癸已戊已兩餘弦皆變
正弦(癸已為丙亥弧正弦戊巳為辛亥弧正弦)然則先以兩正相乘者今為
兩餘然雖變兩餘而其為丙癸與辛戊者不變故其所
得之初數戊庚亦不變也次數倣論
總例
凡弧度與半周相減之餘則所用之正弦同餘弦亦
同
凡弧度與象限相減之餘則所用之正弦變餘餘弦變
正
餘弦内減次數例(鈍角法銳角法各一)
丁乙丙弧三角形有三邊
求乙鈍角丙乙小弧其
正弦丙辰餘弦辰巳丁
乙大弧其正弦癸甲餘弦
甲已是為角旁之兩弧
不同類癸乾初得數(兩正)
(弦乘半徑除之數)午已次得數(兩餘弦乘半徑除之數)丁丙對邊大
其正弦壬卯餘弦卯已對邊大于象限而角旁弧不
同類宜相減對弧餘弦大于次數法當于餘弦卯巳
内減去次得數午已餘午卯(即艮丁)為二率
一初得數癸乾
二(次得數減餘弦)艮丁
三半徑辛已
四角餘弦寅已
對邊大角旁弧異類而次數小減對弧餘弦其角為鈍
宜以四率寅已撿餘弦表得度以減半周度其餘即為
乙鈍角之度(即寅酉大矢之度)
若先有乙鈍角求對弧則反用其率
一半徑辛巳
二角餘弦寅已
三初得數癸乾
四(次得數減餘弦)艮丁
既得艮丁乃以次數加之成卯已餘弦檢表得度以減
半周得丁丙對邊之度
凡過弧與其減半周之餘度同用一餘弦故以餘弦檢
表得度以減半周即得過弧
仍用前圖取銳角
丁戊庚三角形(係銳角此形有三銳角)有三邊求戊角戊庚小
邊其正弦庚丑餘弦丑巳丁戊次小邊其正弦癸甲
餘弦甲巳是為角旁弧同類初得數癸乾(半徑除兩正弦)
(矩)次得數午已(半徑除兩餘弦矩)丁庚對邊小其正弦壬
卯餘弦卯巳對邊小于象限而角旁弧同類宜相減
次數午已小于對弧餘弦卯已以午已去減卯已餘
卯午(即艮丁)
一初得數癸乾
二(次得數減餘弦)艮丁
三半徑辛已
四角餘弦寅已
對邊小角旁弧同類而次數小去減餘弦其角為銳宜
以四率寅已檢餘弦表得戊銳角之度
若先有戊銳角度求對邊丁度則反用其度
一半徑辛巳
二角餘弦寅已
三初得數癸乾
四(次得數減餘弦)艮丁
以所得艮丁加次數午已檢餘弦表得丁庚對邊之度
因銳角角旁弧同類次數小于餘弦得數後宜加次數
為對邊餘弦
論曰丁戊庚形與丁乙丙形為相易之形故丁戊為丁
乙減半周之餘戊庚等乙丙此兩弧所用之正弦餘弦
並同則初數次數亦同矣而丁庚對弧亦丁丙對弧減
半周之餘則所用餘邊又同加減安得不同
次數内轉減餘弦例(銳角法鈍角法各一)
丁乙丙形三邊求乙角(係銳角)丙乙小邊正弦辰丙餘
弦辰已丁乙大邊正弦癸甲餘弦甲已是為角旁
之兩邊不同類初得數甲乾(半徑除兩正弦矩)次得數午
已(半徑除兩餘弦矩)丁丙對邊
大正弦壬卯餘弦卯已
對邊大而角旁弧不同類
宜相減次數午已大于
對弧餘弦卯已法當于午
己内減卯巳餘午卯(即甲艮)
為二率
一初得數甲乾
二(餘弦減次數之餘)甲艮
三半徑辛巳
四角餘弦寅已
對邊大角旁弧異類而次數大受對弧餘弦之減其角
為銳宜以四率寅已檢餘弦表得乙銳角之度(即寅辛矢度)
若先有乙角而求對邊丁丙則反用其率
一半徑辛巳
二角餘弦寅己
三初得數甲乾
四(餘弦減次數之餘)甲艮
末以所得甲艮轉減次數午已得對弧餘弦卯巳檢表
得度以減半周為對弧丁丙度
前圖取鈍角
丁戊庚形三邊求戊角(係銳角)戊庚小邊正弦丑庚餘
弦丑巳丁戊次小邊正弦癸甲餘弦甲巳是為角
旁兩弧同類初數甲乾(半徑除兩正弦矩)次數午已(半徑除兩)
(餘弦矩)丁庚對邊小正弦壬卯餘弦卯巳對邊小而
角旁兩弧同類宜相減次數午巳大於對邊餘弦
卯巳當于午巳内減卯已餘午卯(即甲艮)
一初得數甲乾
二(餘弦減次數之餘)甲艮
三半徑辛巳
四角餘弦寅已
對邊小角旁弧同類而次數大内減去餘弦其角為鈍
宜以四率寅巳檢餘弦表得度以減半周得戊鈍角之
度
若先有戊鈍角而求對邊丁庚則反用其率
一半徑辛已
二角餘弦寅巳
三初得數甲乾
四(餘弦減次數之餘)甲艮
末以所得甲艮轉減次數午巳得對弧餘弦卯已檢表
得對弧丁庚之度
一係半渾員面所成斜三角形左右皆相對如左銳
角者右必鈍也對邊左小者右必大也角旁之邊左為
同類者右必異類也(角旁兩弧一居員周一居圓面此員面弧線左右所同用也而員周)
(之弧左右有大小故同于左者不同于右)
加減法(以代乘除)
初數次數並以乘除而得今以總弧存弧之餘弦相加
減而半之即與乘除之所得脗合法簡而妙而甲數乙
數之用亦從此生矣
總法曰凡兩弧相并為總弧相減為存弧(存弧一曰較弧)
總弧存弧各取其餘弦以相加減成初數次數法曰
視總弧過弧限則總存兩餘弦相加總弧不過象限則
相減皆折半為初數(即原設兩弧之正弦相乘半徑除之之數)以初數轉減
存弧餘弦即為次數(即原設兩弧之餘弦相乘半徑除之之數)又法(總弧過象限兩)
(餘弦相減不過象限則相加並折半為次數)又法(初數以相加成者以總弧餘弦減初數以相減成者)
(以總弧餘弦加並加減初數為次數亦同)
又取總弧存弧之正弦相加減成甲數乙數法曰以
總存兩正弦相加折半為甲數(即原設大弧正弦乘小弧餘弦半徑除之之數)
總存兩正弦相減折半為乙數(即原設小弧正弦乘大弧餘弦半徑除之之數)
又法(以存弧正弦減甲數其餘為乙數亦同)又法(以甲數減總弧正弦即得乙數)
總弧在象限内兩餘弦相減
大弧丙寅小弧辰丙(即丑丙)二弧相加為總弧辰寅
相減得存弧丑寅丑寅存弧之餘弦丑癸(亦即丁乙)
辰寅總弧之餘弦卯辰(即癸子亦即乙午)兩餘弦相減(丑癸内減)
(子癸存丑子或乙丁内減乙午存午丁)其餘
半之(丑子半之于壬成壬丑即亥丁)為(丙寅)
(辰丙)二弧兩正弦相乘半徑
除之之數即初得數也
以初得數轉減存弧之餘
弦(以壬丑減丑癸其餘癸壬亦即亥乙)其餘
為大小二弧兩餘弦相乘半徑除之之數即次得數也
論曰丙辛大弧之正弦也丑戊小弦之正弦也以句股
形相似之故乙丙半徑(弦)與丙辛正弦(股)若丑戊正弦
(小弦)與丑壬初得數也(小股)其半而得者何也曰辰戊
同丑戊則戊巳亦同丑壬而壬子即已戊則子丑者初
得數(壬丑)之倍數故半之即得辛乙大弧之餘弦也戊
乙小弧之餘弦也乙丙半徑(弦)與辛乙餘弦(句)若戊乙
餘弦(小弦)與亥乙次得數也(小句)又以存弧餘弦内兼
有初得次得兩數故減初得次也(丑癸餘弦内有丑壬初數癸壬次數故減)
(丑壬即得癸壬也或于乙丁内減亥丁得亥乙並同)
以上用總存兩餘弦加減
又丑寅存弧之正弦丑丁(即午子或癸乙)辰寅總弧之正弦辰
午(即卯乙)兩正弦相加半之為大弧正弦乘小弧餘弦半
徑除之之數即甲數也以甲數轉減總弧之正弦(以午)
(已減辰午其餘巳辰亦即卯未)是為大弧餘弦乘小弧正弦半徑除之
之數即乙數也
論曰乙辛大弧之餘弦也辰戊小弧之正弦也以兩句
股形同比例之故丙乙半徑(弦)與乙辛餘弦(句)若辰戊
正弦(小弦)與辰已乙數也(小句)
又丙辛大弧之正弦也戊乙小弧之餘弦也而丙乙半
徑(弦)與丙辛正弦(股)若戊乙餘弦(小弦)與戊亥甲數(小句)也
又以總弧正弦内兼有甲乙兩數故減乙得甲減甲亦
得乙矣(辰午正弦内有辰巳乙數巳午甲數故減辰巳得巳午若減巳午亦必得辰巳)
以上用總存兩正弦加減
若以酉丙為大弧丙丑為小弧則其總弧酉丑(正弦丑丁餘弦)
(丑癸)其存弧辰酉(正弦辰午餘弦卯辰)但互易存總之名其他並同
論曰凡過象限之弧與其減半周之餘弧同用一正弦如丙
酉過弧以減半周得丙寅所用正弦(丙辛)餘弦(辛乙)皆丙酉弧與
丙寅弧之所同也故但易總存之名而正餘加減之用不變
又法凡過象限之弧即截去象限用其餘度如法加減但以
總弧為存弧存弧為總弧而總存之餘弦為正弦正弦為餘弦
如酉丙過弧截去酉甲象限只用丙甲為大弧與丙丑小
弧相加減則丑甲為總弧其正弦丑癸餘弦丑丁而辰甲
為存弧其正弦卯辰餘弦辰午是總存正餘名皆互易也
法以總存兩正弦相減而其餘折半為甲數(丑癸内減卯辰餘丑)
(子半之得丑壬為甲數)仍以甲數轉減總弧正弦(甲數丑壬轉減丑癸其餘癸壬)
(即乙數)是其名雖易而其實不易也但横易為直
論曰去過弧之象限而用之則過弧之正弦為餘餘弦
為正矣故加減而得之數皆兩弧之正弦乘餘餘弦乘正
之數而非復正乘正餘乘餘之數也何也過弧之正餘
互易而小弧之正餘如故也
如丙酉過弧去象限為丙甲則其正弦丙庚即過弧之
餘弦也(丙庚即辛乙故)其餘弦庚乙即過弧之正弦也(庚乙即丙辛故)
而小弧丙丑之正弦丑戊餘弦戊乙皆如舊故先得之
丑壬為大弧餘弦丙辛乘小弧正弦丑戊而丙乙半徑
除之也非兩正弦相乘也乙數轉減正弦而得之亥乙
(即癸壬亦即戊未)為大弧正弦辛乙乘小弧餘弦戊乙而半徑
除之也非兩餘弦相乘也
又論曰又法即測夜時篇中測星距午之第二法也加
減代乘除只此一例而絶不與七卷八卷之乘除求初
數次數者相蒙雖有學者何從悟入乎愚故為之詳說
以發其覆
又論曰元法依圖直看直者正弦横者餘弦又法正餘
互易則圖當横看變立體為眠體本以總存兩餘弦加
減者變為兩正弦加減然其數並同
又論曰又法是用大弦之餘度而小弧則用元度何以
言之測星條用星之赤緯即去極之餘度也其用赤道
高則極去天頂之元度也然而赤緯在南者則是于星
去極度截去象限之數也何以亦為餘度曰過弧既與
其減半周之餘度同一正弦則此減半周之餘度亦即
正弧也然則此截去象限而餘者非即正弧之餘度乎
大弧過象限若干度與不及象限若干度其正弦並同
故加減可通為一法(此又測星條用法之意)
約法
兩弧俱用本度或俱用餘度相加減以取總存二弧是
兩正或兩餘也則用總存兩餘弦加減法取初得數惟
視總存二弧俱在一象限則相減或分跨兩象限則相
加皆以初數減存弧之餘弦為次得數
若兩弧内有一過弧則總弧之正弦小于存弧而餘弦
反大當以初數減總弧之餘弦為次數
若一弧用本度一弧用餘度相加減以取總存之弧是
一正一餘也則用總存兩正弦加減法其加減皆眎兩
正弦原法或加或減取甲數即以甲數減總弧正弦餘
為乙數
若過弧節去象限而用其剰度與餘度同法(凡餘度是以本度減)
(象限而得名今反以象限減過弧故别之曰剰)
若兩俱剰弧與兩餘弧同法
若只一剰弧與一正一餘同法
論曰過弧用剰度為餘弧其法甚簡快凡過弧皆當用
之可不用本度矣(算普天星經緯歲差宜此)
又按凡存弧之餘弦内兼有兩正弦相乘兩餘弦相乘
兩數即初次兩得數也凡總弧之正弦内兼有此正弦
乘彼餘弦彼正弦乘此餘弦之數即甲乙兩數也故易
其名以别之也
大弧寅丙正弦丙辛餘弦
辛乙小弧辰丙(即丑丙)正
弦辰戊(即丑戊)餘弦戊乙
二弧相加為總弧辰寅正
弦辰午餘弦午乙相減
為存弧丑寅正弦丑丁餘
弦丁乙存總兩餘弦(午乙丁乙)相并成午丁半之于亥成
亥丁即初得數大小二弧兩正弦(丙辛辰戊)相乘半徑除之
之數也以初得數亥丁轉減存弧之餘弦丁乙餘亥
乙即次得數大小二弧兩餘弦(辛乙戊乙)相乘半徑除之之
數也
論曰以句股形相似之故丙乙半徑與丙辛正弦若戊
丑正弦與初數丑壬(即亥丁)也皆弦比股也
又丙乙半徑與辛乙餘弦若戊乙餘弦與次數亥乙也
皆弦比句也
以上用總存兩餘弦加減因總弧跨過象限故相加
又存弧正弦丑丁與總弧正弦辰午相加成辰乾(以午乾等)
(丁艮亦即丑丁也)折半得巳午(即戊亥為辰子折半為巳子子乾折半午子合之成巳午)
為甲數大弧正弦丙辛乘小弧餘弦戊乙半徑丙乙除
之也
以甲數已午轉減總弧正弦辰午餘辰巳為乙數大弧
餘弦辛乙乘小弧正弦辰戊半徑丙乙除之也
以上用總存兩正弦加減
若用酉丙過弧為大弧丙丑為小弧則其總弧酉丑存
弧酉辰但互易存總之名其它並同以過弧酉丙所用
之正弦丙辛餘弦辛乙即丙寅弧所同用故也
又法
于酉丙過弧内截去象限酉甲只用其剰弧甲丙則甲
丙反為小弧丙丑反為大弧(說見前條)
圖式三
總弧在象限内兩餘弦相
減乙丙小弧其正弦丙
辰餘弦辰已丁乙稍大
弧其正弦丁甲餘弦甲巳
戊壬初得數(兩正弦相乘半徑除)
(也即庚甲或戊卯)午戊次得數
(兩餘弦相乘半徑除也即巳癸)今改用加減以省乘除以二弧相
加成總弧丁丙其正弦子丁餘弦子巳又二弧相較
成存弧壬丙其正弦壬辛(卽午巳)餘弦辛巳(卽壬午)
于存弧之餘弦辛巳内減去總弦之餘弦巳子存子
辛半之于癸得子癸及辛癸皆初得數也亦卽戊
壬也(或于壬午丙減午卯半之于戊得卯戊及戊壬亦同亦即庚甲也)又于存弧餘
弦辛已内仍減去初得數辛癸存癸已即次得數也(壬午)
(内減戊壬存午戊亦同)
此因總弧在象限内故以總弧餘弦減存弧餘弦求初
數是初數小于次數
解曰以句股形相似之故己丙半徑(弦)與丙辰正弦(句)
若丁甲正弦(弦)與甲庚初數也又壬甲等甲丁故庚甲
亦等戊壬而戊卯即庚甲故可以半而得之也
又已丙半徑(弦)與辰已餘弦(股)若甲已餘弦(弦)與巳癸
次數(股)也
右係總存兩餘弦用法
又丁庚為甲數(丁甲大弧正弦乘辰巳小弧餘弦半徑除之也亦即庚卯即甲戊)子
庚為乙數(辰丙小弧正弦乘甲巳大弧餘弦半徑除之也即癸甲)
今改用加減法以存弧正弦子卯(即辛壬)加總弧正弦子
丁成卯丁而半之于庚得丁庚為甲數(亦即庚卯即戊甲)仍
于總弧正弦丁子内減去甲數丁庚存子庚(即癸甲)為乙
數
此亦總弧在象限内亦總存兩正弦相加求甲數是甲
數大于乙數
解曰以句股形相似之故已丙半徑與辰巳小弧餘弦
若丁甲大弧正弦與甲數丁庚皆弦與股之比例也又
丁甲等壬甲故戊甲亦等丁庚而戊甲即庚卯故可以
半而得之也
又巳丙半徑與丙辰小弧正弦若甲已大弧餘弦與乙
數甲癸(即子庚)皆弦與句之比例也
右係總存兩正弦用法
一係凡兩弧内無過弧則存弧之餘弦大故其中有
初次兩數而總弧則正弦大故其中有甲乙兩數雖兩
數相加能令總弧跨過象限此理不變餘弦仍係存弧
大正弦仍係總弧大
總弧過象限兩餘弦相加
乙丙小弧正弦辰丙餘
弦辰已乙丁過弧正弦
丁甲餘弦甲已初得數
戊丁(半徑除兩正弦矩即子癸亦即癸辛亦即)
(庚甲)次得數癸巳(半徑除兩餘弦矩)
今用加減代乘除以二弧相加成總弧丁丙正弦丁子餘弦子
已又二弧相較成存弧壬丙正弦壬辛餘弦辛巳乃以
總存兩餘弦相加成子辛(子巳加辛巳)而半之于癸得子癸
及癸辛(亦即丁戊即庚甲)初得數也又以初數子癸轉減總
弧之餘弦子已餘癸巳次得數也(此因總弧跨過象限故兩餘弦相加求初)
(數是初數大于次數)
解曰以句股形相似故半徑已丙與正弦丙辰若正弦
丁甲與初數丁戊皆弦與股之比例也又半徑丙已
與餘弦辰已若餘弦甲巳與次數癸已皆弦與句之比
例也又壬甲等丁甲則庚甲亦等戊丁而辛癸亦等
子癸故半而得
右用總存兩餘弦加減
又甲數丑甲小弧餘弦辰已乘過弧正弦丁甲半徑除
之也乙數癸甲小弧正弦辰丙乘過弧餘弦甲巳半
徑除之也
今用加減搃存兩正弦相加成丑戊(癸戊與正弦丁子等丑癸與正弦辛)
(壬等故以相加即成丑戊)半之于甲得丑甲(亦即甲戊)為甲數仍以甲
數丑甲轉減存弧正弦丑癸餘癸甲為乙數(或以總弧正弦癸戊)
(減甲數甲戊亦即得乙數癸甲)
此亦總弧跨象限外仍係總存兩正弦相加求甲數(甲數)
(仍大于乙數)
解曰半徑丙已與小弧餘弦辰已若大弧正弦丁甲與
甲數丑甲皆以弦比句也又半徑丙已與小弧正弦
辰丙若大弧餘弦甲巳與乙數癸甲皆以弦比股也
又壬甲等丁甲則甲戊亦等壬庚而壬庚即丑甲故半
之而得
右用總存兩正弦加減
一係凡兩弧内有過弧者總弧之餘弦反大故初次
兩數皆在總弧餘弦内而總弧之正弦反小故甲乙兩
數皆在存弧正弦内也(此必原有一過弧始用此例非謂總弧過象限也觀圖自)
(明)
甲數乙數用法(黃赤道經緯相求)
黃赤二道經緯相求用斜弧三角形以星距黃極為一
邊星距北極為一邊并兩極之距為三邊此本法也今
不用距極度而用其餘度(距極度本為緯度之餘今用三角形以距極度為邊故緯)
(度皆為餘度)徑取黃緯為一邊(此先有黃緯而求赤緯也若先有赤道而求黃道即用赤)
(緯為邊)二至之黃赤大距為一邊(黃赤大距原與兩極之距等)而取二
邊之總存兩正弦為用以加減省乘除故在本法為初
數次數者别之為甲乙數焉甲數乙數不止為求黃赤
而舉此為式其理特著故命之曰甲數乙數用法實黃
赤相求簡法矣
第一圖黃緯小于黃赤大距甲數大乙數小
甲丙亢危大圈為過
兩極之經圈(即二至經圈)
心乙亢軸即黃道
二分經綫丙乙室
為黃道心為黃極
寅乙危為赤道
甲為北極辰胃婁
為黃道北緯(即丙辰之度)丑尾奎為黃道南緯(即丙丑之度)
星在箕箕心為星距黃極緯度箕女為星距黃道
緯(即丙辰之度)甲心箕銳角為黃道經度其餘弦女乙
甲心為兩極相距(二十三度三十一分半)寅丙為夏至距緯(同甲)
(心之度)
今求甲箕為星距北極緯度其餘弧箕翌為星距赤
道緯(即氐危之度)
用甲心箕三角形有心角(黃道經)有心箕弧(星距黃極緯)有甲
心弧(為兩極之距)而求對角弧甲箕(星赤道北極緯)
依加減代乘除改用寅丙夏至距(即心甲)辰丙黃道緯(即心)
(箕之餘箕女又即丙丑度)寅丙辰丙相加為總弧辰寅其正弦辰
午又相減為較弧丑寅其正弦丑丁(亦即丁井亦即午昴亦即子午)
以丑丁正弦(即午昴)加辰午正弦成辰昴折半得巳午
甲數(巳子為辰子之半子午為子昴之半合之成巳午)甲數(巳午)轉減正弦(辰午)餘
(巳辰)為乙數
或以丑丁正弦(即子午)減辰午正弦餘辰子折半得辰巳
為乙數以乙數轉減總弧正弦辰午得已午為甲數亦
同
法為黃道半徑(丙乙)與心角之餘弦(女乙)若甲數(巳午)與四率
(斗未)也
一黃道半徑丙乙
二心角餘弦女乙
三甲數巳午(即戊酉)
四(減過乙數之赤緯正弦)斗未(即虚柳)
論曰丙乙半徑與女乙餘弦原若辰胃與箕胃(辰胃者箕心黃)
(緯之正弦即距等圈半徑因箕心角線過箕至女分辰胃正弦于箕亦分丙乙半徑于女故丙乙與女乙若辰)
(胃與箕胃皆全與分比例)而辰胃同戊乙箕胃同斗乙皆弦也(戊酉乙大)
(句股以戊乙為弦戊酉為句斗未乙小句股以斗乙為弦斗未為句)戊酉(同巳午)斗未皆句
也則其比例等故丙乙與女乙能若戊乙與斗乙亦即
若已午與斗未
以乙數(辰巳即箕虚)加四率(斗未即虚柳)成箕柳即所求赤道緯
度正弦檢表得赤緯在北(即箕翌亦即氐危)
若先有赤緯黃緯而求黃經則互用其率以三四為一二
法為甲數(戊酉)與赤緯正弦内減乙數之斗未若黃道半
徑(丙乙)與心角黃經度之餘弦(女乙)也
一甲數戊酉(即午巳)
二(乙數箕虚減赤緯正弦)半未(即虚柳)
三黃道半徑丙乙
四心角餘弦女乙檢餘弦表得心角之度
假如前圖星在尾為黃道南緯則所用之甲數乙數並
同所得之四率亦無不同而赤緯迥異
何以言之曰心不在箕而在尾則心
甲弧(兩極距度)心角(黃道經度)皆不變唯尾心
弧大于箕心故甲心箕三角形變為
甲心尾三角而所求對角之甲尾弧
亦大于甲箕故赤緯異也
然則所用之甲數乙數又同何也曰尾心為過弧則用
在女尾(尾心内減去女心象限)女尾為黃道南緯與箕女北緯同
度亦即同正弦則相加為總弧相減為較弧亦同而甲
乙數不得不同矣而三率算法亦必同矣但所得四率
在北緯則用加在南緯則用減緯度迥異理勢自然也
一黃道半徑丙乙
二心角餘弦女乙以乙數(辰巳)減四率斗未減盡
三甲數已午無餘為星在赤道無緯度
四(加過乙數之赤緯正弦)斗未
論曰此因乙數與四率同大故減盡也減盡則甲尾正
九十度而星在赤道無緯也
亦有四率小于乙數者則當以四率轉減乙數用其餘
為緯度正弦在赤道南
又論曰星在箕為黃道北在尾為黃道南然所得赤緯
皆在北者以箕尾經度皆在夏至前後兩象限中也故
所得四率在赤道北而加乙數則北緯大減乙數則北
緯小皆北緯也惟四率轉減乙數則變為南緯(此亦惟黃南緯)
(星又近二分則雖在夏至前後象限中而有南緯)
亦有無四率者心角必九十度其星必在黃道二分經
度無角度餘弦為次率故亦無第四率可求但以乙數
為用視星在南北即以乙數命為南北緯度之正弦
假如前圖中有星在胃是在北也即以乙數胃張(即辰巳)
命為赤道北緯之正弦若星在房是在南也即以乙數
乙癸(亦即辰巳)命為赤道南緯之正弦
又有所得四率北反用減南反用加者心角必為鈍角
其星必在冬至前後兩象限其角度餘弦必為大矢内
減儀象限之餘則所得第四率在赤道之外(外即南也)而加減後
所得皆赤道之南緯也故加減皆反(求北緯以加而南緯必減者星在北也求北緯)
(以減而南緯必加者星在南也盖所得第四率原係在北在南兩星緯度之中數星在北在南皆主黃道言)
假如前圖中有星在兑為黃道北而甲心兑三角形心
為鈍角其餘弦艮乙為艮丙大矢内
減象限之餘故所得第四率未斗在
赤道之外為赤道南緯(此南緯是黃道軸距赤道)
(軸)而兌星在黃道之北則其南緯正
弦小于未斗故必以乙數牛斗(即辰己亦即奎巳)減之其餘牛
未(同兌庚)即兌星赤道南緯之正弦
若星在巽亦同用心鈍角為甲心巽三角形艮乙餘弦
四率未斗在赤道外並同但巽星又在黃道之南則其
南緯大于未斗四率故必以乙數虚巽(即辰巳亦即牛斗)加之
成巽柳即巽星南緯之正弦
亦有四率小于乙數者則以四率轉減乙數用其餘為
緯度在赤道北
又論曰星在兌為黃道北在巽為黃道南然所得赤緯
皆在南者以兌巽經度皆在冬至前後兩象限中也故
所得四率在赤道南而以乙數減則南緯小以乙數加
則南緯大皆南緯也惟四率轉減乙數者則變為北緯
(此亦必黃北緯星又近二分故雖在冬至前後象限中而仍有北緯凡以乙數及四率相加減成緯度者並)
(主緯度之正弦而言後倣此)
總論曰凡乙數皆南北兩赤緯度相減折半之數甲數
則兩緯度之中數也(如箕女與女尾兩黃緯同度而不能以女庚為兩赤緯弦之中數者弧)
(度有斜正故也)而所得四率即所求星南北兩緯正弦中數故
與甲數為比例
凡所得四率星在夏至前後兩象限四率在赤道北星
在冬至前後兩象限四率在赤道南
凡總弧正弦内兼有甲數乙數(不論黃南黃北並同一法)但視黃緯
之大小若黃緯小于黃赤大距則以總存兩正弦相併
而半之為甲數若黃緯大于黃赤大距則以總存兩正
弦相減而半之為甲數並以甲數轉減總弧正弦為乙數
又法
黃緯小于黃赤大距以總存兩正弦相減而半之則先
得乙數黃緯大于黃赤大距以總存兩正弦相併而半
之亦先得乙數並以乙數轉減總弧正弦為甲數
求赤緯約法
凡星有黃緯之南北有黃經之南北(黃經南北即南六宫北六宫星在)
(夏至前後先得之黃經為銳角是經在北也也星在冬至前後先得之黃經為鈍角是經在南)
若星之黃緯南北與黃經同者其赤緯南北亦與黃緯
同法用四率乙數相加為緯度正弦加惟一法
星在黃道北又係夏至前後兩象限先得黃經銳角是
經緯同在北則赤緯亦在北星在黃道南又係冬至
前後兩象限先得黃經鈍角是經緯同在南則赤緯亦
在南
若星之黃緯南北與黃經異者赤緯有同有異皆四率
乙數相減為赤緯正弦減有二法
但視乙數大受四率轉減者赤緯之南北與黃緯同
如星在黃道北而在冬至前後兩象限黃經角鈍是緯
北而經南也而乙數大受四率轉減則赤緯仍在北
星在黃道南而在夏至前後兩象限黃經角銳是緯南
而經北也而乙數大受四率轉減則赤緯仍在南
若乙數小去減四率者赤緯之南北與黃緯異如星
在黃道北而在冬至前後黃經角鈍為緯北經南而乙
數又小去減四率則赤緯變而南星在黃道南而在
夏至前後黃經角銳為緯南經北而乙數又小去減四
率則赤緯變而北
若星在黃道軸線是正當二分經度也其角必九十度
無餘弦亦無四率但以乙數為用星在北即以乙數
命為赤道北緯之正弦星在南即以乙數命為南緯
之正弦
若遇乙數四率相減至盡者其星正當赤道無緯度
第二圖黃緯大于黃赤大距甲數小乙數反大
(有黃道經緯求赤緯)
甲北極心黃極
甲心為兩極之距
丙室黃道寅危赤
道寅丙為夏至大
距(同甲心)乙為二分
以上並與前圖無
二所異者黃緯丙
丑(即丙辰)大于寅丙故
乙數亦大于甲數寅丙之正弦丙辛餘弦辛乙丙
丑之正弦辰戊(或戊丑)餘弦戊乙
甲數戊酉乃寅丙正弦乘丙丑餘弦半徑除之也法為
丙乙半徑與正弦丙辛若戊乙餘弦與甲數戊酉
乙數辰巳(或巳子或戊壬)乃辛乙餘弦乘辰戊正弦半徑除之
也法為丙乙半徑與餘弦辛乙若辰戊正弦與乙數辰
巳
假如星在箕為在黃道北箕心為距黃極之度其餘箕
女黃道北緯也有箕心甲心(兩極距)二邊有心銳角(黃經)用
甲心箕三銳角弧形求赤緯甲箕為對角之弧
依加減代乘除改用寅丙辰丙二弧相加為總弧辰寅
其正弦辰午又相減成較弧寅丑其正弦丑丁(即午子)
以丑丁正弦加辰午正弦成辰子折半于巳為乙數(辰巳)
(及巳子)乙數辰已轉減總弧正弦辰午得已午為甲數
(即戊酉)
本法以丑丁減辰午折半得已午為甲數甲數巳午
轉減辰午得辰巳為乙數
法為黃道半徑丙乙與餘弦女乙若甲數戊酉與四率
斗未也(理見前式論見)
一黃道半徑丙乙既得斗未以乙數箕
二心角餘弦女乙虚加之成箕柳為赤
三甲數戊酉緯正弦查表得箕翌
四(以乙數減赤緯正弦)斗未(即虚柳)赤緯度在赤道北
右係黃緯在北而心為銳角黃經亦在北故法用
加而赤緯仍在北
若先有黃赤緯度而求黃經則互用其率亦同前式
一甲數戊酉
二(乙數減赤緯正弦)斗未
三黃道半徑丙乙
四心角餘弦女乙查餘弦表得心角之度
假如前圖星在尾為在黃道南則所用之甲數乙數及
所得之四率並同惟赤緯異
論曰星不在箕而在尾則甲心箕三
銳角形變為甲心尾三角形而心尾
弧大于心箕故所求對角之甲尾弧
亦大于甲箕而赤緯大異
心尾大于心箕而甲數乙數悉同者因用餘弧則女尾
南緯與女箕北緯同度故也
一黃道半徑丙乙既得斗未以轉減乙數斗
二心角餘弦女乙牛得餘未牛(即尾申)為赤緯
三甲數戊酉正弦查表得尾卯緯度在
四(乙數内減赤緯正弦)斗未赤道南
論曰此係乙數跨赤道故乙數内兼有赤緯及四率之
數而減赤緯得四率以四率轉減亦得赤緯
右係黃緯在南而心為銳角是緯南而經北法當
用減而乙數大受四率反減故赤緯仍在南
假如前圖星在巽則所用之甲數乙數亦同惟四率異
(因巽艮黃緯即室奎之度與丙丑同故甲數酉戊與戊酉同大而乙數斗牛兊乾並同辰巳)
又巽星在黃道南而心為鈍角星在
秋分後春分前黃經亦在南則赤緯
亦在南法當用加
一黃道半徑丙乙(即室乙)
二(鈍角餘弦即大矢减半徑之餘)艮乙(艮丙為心鈍角大矢内减丙乙得艮乙)
三甲數酉戊
四(赤緯正弦内減乙數)未斗
既得未斗以乙數斗牛(即辰巳)加之成未牛為赤緯正
弦(即柳巽)查表得震巽緯度在赤道南
假如前圖星在兌為黃道北所用之
甲數乙數四率並同惟赤緯異(兌艮北緯)
(與巽艮南緯並同丙丑之度故甲數乙數同甲心巽與甲心兊兩鈍角形)
(同用心鈍角故四率亦同惟心兊弧小于心巽故所求對角弧甲兊亦小)
(于甲巽而赤緯異)
一黃道半徑丙乙既得未斗以轉減乙數
二鈍角餘弦艮乙兊乾得餘兊離為赤緯
三甲數酉戊正弦查表得兊坎緯度
四(乙數内減赤緯正弦)未斗(即離乾)在赤道北
右係黃緯在北而心為鈍角是秋分後春分前為
緯北而經南法當用減而乙數大受四率轉減故
赤緯仍在北
第三圖赤緯大于二極距甲數小乙數大
心甲箕三銳角形星在箕有黃極緯心箕有北極
赤緯甲箕有黃赤極
距心甲(即室危)求甲角
為赤經辰危赤緯
大于危室大距(即心甲)
與前圖略同故乙數
亦大於甲數所異
者此求赤經故諸數
皆生于赤緯謂總弧
較弧皆用赤緯也而加減正弦反在黃道矣
室危兩極距之正弦室辛餘弦辛乙
辰危赤緯(即箕女為甲箕距比極之餘)之正弦辰酉餘弦酉乙
甲數戊酉法為半徑室乙與辛室正弦若酉乙餘弦與
甲數戊酉也
乙數辰已法為半徑室乙與辛乙餘弦若辰酉正弦與
乙數辰已(或婁酉正弦與乙數酉壬)也
依加減代乘除改用辰危室危相加為總弧辰室其正
弦辰午又相減為較弧婁室其正弦婁丁(即午昴)
又以較弧正弦午昴減總弧正弦辰午餘數半之得已
午為甲數(即戊酉也法于辰午内截減辰坤如午昴其餘坤午半之于已即得已午)
甲數已午轉減辰午正弦餘辰巳為乙數(或以甲數已午加較弦午)
(昴成巳昴乙數亦同)箕虚及未牛並同(皆乙數也)
又以箕翼黃緯之正弦箕柳與乙數箕虚相減得虚柳
(即未斗)以為次率(因箕柳黃緯大乙數箕虚小故于黃緯正弦内減乙數得未斗)
法為甲數戊酉與未斗若酉乙與未乙亦即若危乙半
徑與甲角之餘弦女乙也
一甲數戊酉
二(黃緯正弦内減去乙數)未斗
三赤道半徑危乙
四甲角餘弦女乙
論曰赤道經度春分至秋分(北六宫)為鈍角秋分至春分
(南六宫)為銳角其角與黃經正相反此條星在箕是赤緯
在北也而黃緯亦北兩緯同向宜相減成次率而乙數
小于黃緯必以乙數減黃緯而得未斗乙數減黃緯而
緯在北赤經必南六宫為銳角查表得度為甲角度即
赤經也在秋分後以所得減三象限在冬至後以所得
加三象限皆命為其星距春分赤道經度
若星在尾用甲心尾三角形則以黃
緯正弦反減乙數為次率(未牛乙數大于黃緯)
(斗牛故以斗牛反減未牛得未斗)餘率並同
論曰此條星在尾是赤緯在南也而黃緯亦並在南兩
緯同向宜相減而成次率而乙數大于黃緯宜于乙數
内轉減去黃緯成未斗也乙數大受黃緯轉減而緯在
南赤經必亦在南六宫為銳角
一甲數戊酉
二(乙數内減黃緯)未斗
三赤道半徑危乙
四甲角餘弦女乙
假如前圖星在兊用心甲兊三角形
有心兌邊(星距黃極)有甲兌邊(星距北極)有心
甲邊(兩極距)求甲鈍角為赤道經度
因赤緯同故甲數乙數同
星在兊赤緯在北黃緯亦在北緯同向北宜相減而成
次率而乙數大以黃緯減之得斗未(乙數兊乾内減去黃緯兊離餘離乾)
(即斗未)
乙數大受黃緯轉減而赤緯在北必赤經亦在北六宫
為鈍角
一甲數酉戊
二(乙數内減去黃緯)斗未
三赤道半徑寅乙
四甲角餘弦艮乙
以艮乙查餘弦表得度用減半周為甲鈍角即赤經也
在春分後以象限減鈍角度在夏至後以鈍角度與三
象限相減皆命為星距春分赤道經度
假如星在巽用心甲巽三角形有心巽邊(距黃極)有甲巽
邊(距北極)有甲心邊(兩極距)求甲鈍角為赤經
甲數乙數並同
惟心在巽是赤緯南也黃緯亦南也兩緯並南宜相減
成次率乙數小黃緯大故以乙數
減黃緯得斗未(斗牛黃緯即柳巽也内減乙數未牛餘即)
(斗未矣)乙數小去減黃緯而赤緯在
南赤經必在北六宫為鈍角
一甲數酉戊
二(黃緯内減乙數)斗未
三赤道半徑寅乙
四甲角餘弦艮乙
以艮乙餘弦查度春分後用餘弦度減象限夏至後加
象限皆命為距春分赤經
第四圖赤緯小于二極距甲數大乙數小
假如星在箕用心甲
箕鈍角形有心箕過
(距黃極對角邊也其餘箕翼即黃緯)有
甲箕邊(距北極即辰危之餘)有
心甲邊(兩極距寅丙及危室並同)
求甲鈍角赤道經
兩極距危室之正弦
危辛餘弦辛乙赤緯危辰之正弦辰戊餘弦戊乙
甲數戊酉(為半徑危乙與二極距之正弦危辛若赤緯餘弦戊乙與甲數戊酉也)
乙數辰巳(或戊壬赤為半徑危乙與二極距之餘弦辛乙若緯正弦辰戊與乙數辰巳也)
依加減代乘除以辰危危室兩弧相加為總弧辰室其
正弦辰午
又相減為較弧婁室其正弦婁丁(或丁井即午昴)
以總弧正弦辰午加較弧正弦午昴成辰昴而半之為
甲數巳午(巳坤為辰坤之半坤午為坤昴之半合之為巳午)即戊酉
又以甲數己午轉減正弦辰午得辰巳為乙數(亦即戊壬)
星在箕為赤緯北而黃緯亦在北兩緯同向宜相減而
成次率而乙數大當以黃緯轉減之成斗未(牛未乙數内減牛斗)
(黃緯餘斗未)
乙數大受黃緯反減而緯在北赤經在北六宫為鈍角
一甲數酉戊以艮乙餘弦查度春分後
二(乙數内減黃緯正弦)斗未用減象限夏至後加象限
三赤道半徑寅乙命為距春分經度
四甲角餘弦艮乙
若星在尾用心甲尾三角形則為南緯而黃緯亦南兩
緯同向宜相減成次率而乙數小于
黃緯故以乙數減黃緯成斗未(虚尾黃緯)
(内減乙數氐尾餘虚氐即斗未)其甲數乙數等算
並同乙數小去減黃緯而緯在南
赤經必在北六宫為鈍角
一甲數酉戊
二(黃緯正弦内減乙數)斗未
三赤道半徑寅乙
四甲角餘弦艮乙
若星在兑用心甲兑三角形兑為北緯而黃緯亦北兩
緯同向宜相減成次率而乙數小于
黃緯故以乙數減黃緯成未斗(兊乾黃緯)
(内減乙數兊離餘餘離乾即未斗)甲數乙數並同
乙數小去減黃緯而緯在北赤經反
在南六宫為銳角
一甲數戊酉以女乙餘弦度秋分後減
二(黃緯正弦内減乙數)未斗三象限冬至後加三象限
三赤道半徑危乙命為距春分赤經(下同)
四甲角餘弦女乙
若星在巽用心甲巽三角形赤緯南黃緯亦南兩緯同
向宜相減成次率而乙數大以黃緯轉減之成未斗(未牛)
(乙數内減黃緯斗牛即柳巽其餘即未斗)
乙數大受黃緯轉減而緯在南赤經
即在南六宫為銳角
一甲數戊酉
二(乙數内減黃緯正弦)未斗
三赤道半徑危乙
四甲角餘弦女乙
第五圖赤緯小于二極距甲數大乙數小
黃緯乙數相加成次
率(黃緯在南角銳鈍黃緯在北角)
星在巽用心甲巽三
角形有心甲邊(二極距)
有巽甲邊(距北極度為過弧其)
(赤緯女巽在南)有巽心邊(距黃)
(極度其餘巽為黃緯在北)求對
巽心弧之甲角心甲兩極距即危室(或寅丙)其正弦危
辛餘弦辛乙女巽赤緯即危婁(或辰危即丑寅)其正弦辰戊
餘弦戊乙
甲數戊酉(兩極距正弦危辛乘赤緯餘弦戊乙半徑危乙除之之數也法為危乙與危辛若戊乙與戊酉)
乙數辰巳(兩極距餘弦辛乙乘赤緯正弦辰戊半徑危乙除之之數也法為危乙與辛乙若辰戊與辰巳)
依加減代乘除改用辰危危室相加為總弧辰室其正
弦辰午又相減為較弧婁室其正弦婁丁(即午昴及丁井)
以總較兩正弦相加成辰昴折半得巳午為甲數即戊
酉(巳坤為辰坤之半坤午為坤昴之半合之成己午)
甲數巳午轉減總弧正弦辰午得辰巳為乙數即戊壬
黃緯巽氐在北赤緯女巽在南兩緯異向宜以乙數與
黃緯正弦相加成次率(以同黃緯正弦巽柳之牛斗加同乙數戊壬之未牛成未斗)
乙數黃緯正弦相加而黃緯在北其赤經必在南六宫
為銳角法為甲數戊酉與未斗若戊乙與未乙亦即若
危乙與女乙
一甲數戊酉以女乙查餘弦表得度
二(乙數加黃緯正弦)未斗秋分後減冬至後加皆與
三赤道半徑危乙三象限相加減命為其星
四甲角餘弦女乙距春分赤道經度
又如星在箕用心甲箕三角形有心甲邊(二極距)有箕甲
邊(距北極度其餘箕艮赤緯在北)有箕心邊(距黃極度為過弧其黃緯翼箕在南)求對箕
心弧之甲角
甲數乙數同上
惟黃緯翼箕在南赤緯箕艮在北兩緯異向宜以乙數
與黃緯正弦相加成次率(以黃緯正弦箕張相)
(同之牛斗加乙數辰巳相同之牛未成斗未)
乙數與黃緯弦相加而黃緯在南其
赤經必在北六宫為鈍角法為甲數
酉戊與斗未若戊乙與未乙亦即若寅乙與艮乙
一甲數戊酉以艮乙查餘弦表得度春
二(乙數加黃緯正弦)斗未分後減夏至後加皆加減
三赤道半徑寅乙象限命為其星距春分赤
四甲角餘弦艮乙赤道經度
求赤道經度約法
用三邊求角(兩極距為一邊距北極為一邊此二邊為角兩旁之弧距黃極為一邊此為對角之)
(弧)以求到鈍角赤道經度在北六宫銳角赤道經度在
南六宫
法為甲數與次率若赤道半徑與所求角之餘弦其樞
紐在次率也
凡黃緯南北與赤緯同向者並以乙數與黃緯相減而
成次率減有二法
凡黃緯南北與赤緯異向者並以乙數與黃緯相加而
成次率
加惟一法
歷算全書卷十
