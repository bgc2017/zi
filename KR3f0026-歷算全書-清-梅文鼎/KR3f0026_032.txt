歷算全書卷二十九
宣城梅文鼎撰
古算衍略
古算器攷
或有問於梅子曰古者算學亦有器乎曰有曰何器曰
古用籌籌何似曰漢書言之矣用竹徑一分長六寸二
百七十一而成六觚為一握度長短者不失毫釐量多
少者不失圭撮權輕重者不失黍絫又世說言王衍持
牙籌會計此用籌之明證也曰若是則籌可用竹亦可
用牙矣然則即今之籌笇非歟曰非也今西歷用籌亦
起徐李諸公蓋從歷家之立成而成即立成表之活者
耳故一籌即備九數若古之用籌用以紀數而無字畫
故一籌只當一數乘除之時以籌縱横列於几案一望
了然觀古算字作祘蓋象形也然則起於何時曰是不
可攷然大易揲蓍亦以一蓍當一數則其來遠矣蓍策
所以决疑非常用之物故特隆重其製而加長長則不
可以横故皆縱列惟分二象兩之後掛一策以别之使
無凌雜餘皆縱列也又其數只四十九故四揲以稽其
實數其用專專則誠也布算之法有十百千萬之等以
乘除而升降又日用必需之物故其製短使几案可列
其言六寸成觚者有度量之用古尺既小於今尺才四
寸竒蓋亦取其便於手握耳(浦江吴氏中饋錄有算條巴子切肉長三寸各如算)
(子樣亦可以想其長短)然則其用之若何曰五以下皆縱列六以
上則横置一籌以當五而縱列其餘(式詳後)然則十百千
萬何以列之曰其式皆自左而右略如珠笇之位亦如
西域歐邏寫算之位皆順手勢不得不同也曰亦有徵
歟曰有之蔡九峯洪範皇極數所紀算位一至五皆縱
列六至九皆横一於上以當五又自一之一至九之九
皆並列兩位自左而右此用於宋者也又授時歷草所
載乘除法實之式皆縱横排列自左而右以萬千百十
零為序此用於元者也左傳史趙言亥有二首六身下
二如身為絳縣老人日數士文伯知其為二萬六千六
百六旬而孟康杜預顔師古釋之皆以為亥字二畫在
上其下三六為身如笇之六蓋横一當五又竪一於横
一之下則為六矣與皇極同也又言下亥二畫竪置身
傍蓋即竪兩笇為二萬又並三六為六千六百六旬而
四位平列與歷草同此又用於三代及漢晉者也
曰歷草又有一至五横紀之處何歟曰此亦非起於歷
草也何以知之唐人論書法横直多者有俯仰向背之
法若直如笇子便不是書其言笇子即所列籌也然兼
横直畫言之則唐人用籌為算亦有横直可知乾鑿度
云卧算為年立算為日蓋位數多者恐其相混故三十
三二十二之類笇位皆一縱一横以别之縱即立算横
即卧算也乾鑿度不知作於何人然其在漢魏以前無
可疑者則横直相錯之法古有之矣五以下既可易縱
為横則六以上横一當五者亦可易之而縱又何疑於
歷草哉曰然則今用珠盤起於何時曰古書散亡苦無
明據然以愚度之亦起明初耳何以知之曰歸除歌括
最為簡妙此珠盤所恃以行也然九章比類所載句長
而澁蓋即是時所創後人踵事增華乃更簡快是書為
錢塘吳信民作其年月可攷而知則珠盤之来則自不
遠
按欽天監歷科所𫝊通軌凡乘除皆有定子之法惟
珠算則可用然則珠算即起其時又嘗見他書元統
造大統歷訪求得郭伯玉善算以佐成之即郭太史
之裔也然則珠盤之法蓋即伯玉等所製亦未可定
曰南雷畣牧齋流變三疉之問既云長水分别算位本
位是竪進一位即是横本位是横進一位即是竪又引
鑿度卧算立算以證之矣然其所圖算位俱作圓點殊
無横直之形何耶曰南雷固言今之算器數分於珠是
指珠算也又云長水之算只用今器其所謂横竪者分
别算位南雷之意蓋謂長水姑借横竪之語以分算位
而實用珠算非實有横竪也然以(鼎)觀之疏既以一横
二竪當十二復以一竪二横當百二十終以一横二竪當
千二百而皆曰進動算位明是用籌非用珠也故當十
進百之時則當取去第一叠零位之二竪而加十位之
一横為二横又添一竪於百位則成百二十矣故曰進
動算位為第二叠也百進千則又取去十位之二横而
增一竪於百位為二竪又别增一横於千位成千二百故亦曰
進動算位為第三叠也說本明晰與今珠算何涉乎若
如南雷所圖則横竪字為贅文矣是故布籌可縱可横
此亦一證
又按朱子語類云潛虚之數用五只似如今算位一
般其直一畫則五也下横一畫則為六横二畫則為
七此又一證也(蔡九峯皇極數以横畫當五故下竪一畫為六竪二畫為七與此相反然)
(理則相通歷草則兼用之蓋皆本之古法)
古布算式
皇極數圖(見性理大全)
歷草算式
立差定平差定平積
右式皆因數有雷同故縱横列之以為别亦自然之理也
乘除法實式(亦見歷草)
亥字二首六身攷
左傳襄公三十年三月癸未絳縣老人曰臣生之歲正
月甲子朔四百有四十五甲子矣其季於今三之一也
師曠曰魯叔仲惠伯會郤成子於承匡之歲也(注魯文公十一)
(年乙巳歲)七十三年矣(注自乙巳歲至今年戊午首末七十四年而曰七十三者蓋計其全數而)
(言未滿七十三年也)史趙曰亥有二首六身(注言亥字上二畫為首六畫為身如算之)
(六者三也春秋時有此字體□)下二如身是其日數也(注如往也言除下亥上二畫往)
(置身旁也□便是此老人從初生年起至今癸未日之日數也蓋以亥之二畫為二萬之數以三六之算為六)
(千六百六旬之數也)士文伯曰然則二萬六千六百有六旬也
按古法每年三百六十五日又四分之一七十三年
該二萬六千六百六十三日又四分之一故注以正
月甲子為夏正建寅之月而三月癸未杜氏長歷及
孔疏皆以為當作二月為夏之十二月也其癸未日
長歷以為是二十三日然則春秋所紀者自用周正
而晉人所言者自是夏正故魯史紀戊午二月者晉
人所言則仍為丁巳之十二月所以士文伯云七十
三年也
籌有色以分正負
沈存中括筆談曰天有黃赤二道月有九道此皆強名
非實有也亦由天之有三百六十五度天何嘗有度以
日行三百六十五日而一朞強謂之度以步日月五星
行次而巳日之所由謂之黃道南北極之中間度最均
處謂之赤道月行黃道南謂之朱道北謂之黑道東謂
之青道西謂之白道黃道内外各四并黃道而九日月
之行有遲有速難以一術御故因其合散分為數段每
段以一色名之欲以别算位而已如算法用赤籌黑籌
以别正負之數歷家不知其意遂以為實有九道甚可
嗤也
按此又宋算用籌之明證
方田通法序
學必有原不得其原不可以為學九數之學具列周官
而孔子言游藝在志道據德依仁後唐十經博士期業
成以五年可形下視哉客歲之冬從竹冠先生飲令弟
樂翁所得觀先生捷田歌括離竒出没杯酒間未深領
其趣屬他故羈治城且匝月既無攜書可破岑寂乃稍
憶所疑演而通之因浩然嘆數學之有源雖至近若方
田而易簡中精深爾爾也算具不具仗三寸不聿為之
今年春里中有事履畝或見問桐陵法遂出斯編相質
命曰方田通法云
閼逢執徐日躔在奎勿菴梅文鼎識
方田通法
太極生生之數
數始於天一終於地十十亦一也天地之地始終乎一
故曰太一太一者太極也自極而儀而象而卦皆加一
倍三加而止萬事託始焉是故制器者尚其象璣衡八
尺周於八方尋常則之以度百物蓋取諸此
兩地之數
一生二二者兩地也兩一則二兩二則四兩四則八兩
八則十有六四象相交成十六事卦有内外也庾以命
斗秉以命斛斤兩則之以權百物蓋取諸此
參天之數
一生二二生三三者參天也參一而三參二而六參四
而十有二參八而二十有四作歷者以紀中節八節二
十四氣八卦二十四爻也是故玉衡之尺八而璣圍二
十有四斤之兩十有六而銖二十有四二十有四者權
度之所生數之綱也從而十之以為地紀而畆法生焉
畆法
二百四十步古法步百為畆畆百為夫今二百四十
步為畆相𫝊起於唐太宗
步法
五合參兩則五猶合四行為土土之生數也倍五則
十土之成數也乘者從生故平方五尺為步而用以乘
除者從成故積步二百四十為畆而用以除
方田原法
以所丈田横步與其縱步相乘得數為實以一畆二百
四十步為法除之滿法為畆不滿退除為分釐田之
為字衡縮相交矩其外格其内象平方也田不能皆方
或圓或直或梯或斜或如牛角或為矢弧不皆方故為
之法以方之大約不離横縱者近是九章之術首列方
田君子絜矩之道歟
截歸法
或八歸三歸各一次或四歸六歸各一次或五因一十
二歸邵子曰三八二十四也四六亦二十四也倍十
二亦二十四也丈量家用截法可以觀已
減法
或折半減二或減六減五各一次即定身除也
飛歸法
進一除二四進二除四八進三除七二進四除
九六五除一二一四四作六一六八作七一
九二作八二一六作九見一加三隔位四見二
加六隔位八不盡者留法喝之
又
三六作一五六作二五八四作三五一八作
四五一三二作五五一五六作六五一八作七
五二四作八五二二八作九五
留法
一留退四一六六二留退八三三三三留一二五
四留一六六六六五留二八三三六留二五
七留二九一六六八留三三三三三九留三七
五其法是除用之似乘以其為除後得數也故謂之
留若用以喝稍者言退者本位不則進一位或稍子
位多者喝完總移進之更妙
凡加留減者如加減法只記原實於各挨身加減之若
原用因法者則又下一位挨加減之皆記原實以留法
喝之言退者各又退一位
以上截留飛減四法皆於乘土之後用以求畆惟留法
則有不盡故長於喝稍
後有用兩求斤留法附錄之一退六二五二一二
五三一八七五四二五五三一二五六三七
五七四三七五八五九五六二五十六二五
十一六八七五十二七五十三八一二五十
四八七五十五九三七五
新增徑求畆步法
其法不用乘土以所得横縱之步先得者為實後得者
為法徑求之可以抵掌而辦原法二十有二竹冠道士
衍為百二十有三勿菴氏引而伸之且三百八十有四
也倚數之妙乃至斯乎而豈有外於參兩乎又豈有加
於所謂一者乎法列如後
減二即十二除凡法之可以兩者皆減二是為畆法
之半或折半六歸之
八除或二十五於下位加之凡法之可以參者皆八
除是為畆法三分之一
四十八除即折半飛歸也凡法之可以五者皆四十
八除是兩其畆法也
四除或二十五乘之凡法之可以六者皆四除是為
畆法六分之一
六除凡法之可以四者皆六除是為畆法四分之一
三除凡法之可以八者皆三除是為畆法八分之一
下加凡法之上位得一者皆下加
上加凡法之下位得一者皆上加凡加畢再用留法
或飛歸之
折半凡法之十二者皆折半為畆法六分之五
減六凡法之可以十五者皆減六即兩求斤留法也
為畆法三分之二又為六分之四
減五凡法之可以十六者皆減五即十五除也為畆
法八分之五
加留減留凡法之可借上者皆加留可借下者則減
留所以通其窮也
隨數喝畆凡二十四則隨數喝之
倍法凡四十八五除之即二因也
減八即畆法八分之六也凡法之可以八分用六者
十八除之又為四分之三
九除即畆法八分之三凡法之可以八分用三者九
除之
二十一除即畆法八分之七凡法之可以八分用七
者二十一除
因法代除如四十八則二因之如七十二則三因九
十六則四因又如十二五因一四四六因一六八七
因一九二八因二一六九因又如六用二五因八四
用三五因一八用四五因一三二用五五因一五
六用六五因一八用七五因二四用八五因二二
八用九五因
加法代除如三加二五即一二五乘所以代八除也
三六加五即十五乘也又如四二徑加七五五四二
次加五皆不用除
原法歌訣(出桐陵)
量田捷法少人知不乘一數便留之二弓折半六
而一三步之中用八歸四步由来六歸是五步
還宜六八歸六數四歸無走作八上三歸無改移
十二將来折一半十六三而加倍齊二十四中
隨數喝廿五中分六八歸三十二上尤甚准四
因還要用三歸四十八上加一倍八卦宫中誰得
知三歸八因尤甚准勝如神見不差池七二倍
之加遍五九十六上四因之十五之中逢二八
七五之中四八歸三七半時當八八九弓加五四
歸竒十八折之加五定三六之中加五施此是
明師真口訣千金不度世人知
附歸除捷法
多上空加一(多上者實多於法也空者實首隔一位也凡實多於法則於實前隔一位上一子若)
(法實兩數等亦同)
依前除莫疑(依前者即以前法數除之也)
少前數上五(少前者實少於法也即於實之前位上五子不隔位)
折半數除之(折半除者用法數之半而除之也用五乘代折半甚捷)
無除隨上一(無除者上五之後不及除半數也既不及除隨於實前位上一子)
化下照前除(化下者退下一位也照前除者即依法數降一位而除之也)
區田圖刊誤
按區田古法並以方一尺五寸為區通計每畝可二千
七百區空一行種於所種行内隔一區種一區除隔空
外可種六百七十五區(此亦約略之說後又云每區一斗每畝可收六十六石而詩亦)
(云限將一畝作田規計區六百六十二並大同小異)是四分而種其一也今農書
之圖黑白相間是二分種一與說相背且如所圖既不
便於營治亦不便於澆灌反不如薑田之用闊溝通人
行之為便矣謹依古說改作之如左
又按四分種一亦是約略之數若細求之則四邊近田
堘處可只空半區要以隨方就圓使其易行亦不在拘拘
於尺寸之間也孟子曰此其大略也若夫潤澤之則在
君與子吾於區田亦云
如甲乙為田内每畫方一尺五寸為區(如甲子)直行每隔
一行種一行(如甲戊丙巳)因得横行亦然(如庚甲辛癸)其播種之
區四面合之各成小平方如丙辛方中間子丑為種地
卯寅方中間午未方為種地皆居小平方之中央又蟬
聫而下通計每田一畆為種區者約四之一圖中白者
是空地黑者是種區
區田說
向讀嵇叔夜養生論謂區種之法畝可得粟數十鐘已
讀王氏農書詳著其法而農政全書載汜勝之書及務
本書謂湯有七年之旱伊尹作為區田教民糞種負水
澆田諸山陵傾坂及田邱城上皆可為之王禎田古人
每區收榖一斗每畝可收六十六石今人學種可減半
計賈思協曰兖州刺史劉仁之昔在洛陽於宅田七十
步之地域為區田收粟三十六石然則一畝之收過百
石矣古說彰彰如是而或者疑之(徐玄扈先生以為古今斗斛之異)余
以為不必疑也蓋徵之於薑芋矣吾鄉土瘠每畝收稻
麥不過數石而芋則每畝二十餘石多者三十餘石薑
之下者二十餘石其上者至四十餘石然而種薑一畝
有稻田六畝以上之工豈非糞多力勤之效乎攷薑田
營治之法其畊甚深在一尺以上通水溝雖止數寸而
畦土斜殺而上種薑稜背相距空間與稜背略相等是
亦空一行種一行也即區種之遺法也薑田惟空直行
而區田復空横行是其功又倍於薑田也多收之數又
何疑焉(又攷遂寧王灼晦叔糖霜譜蔗田亦云區種而其深畊摩勞開渠闊尺深尺五及今年為蔗田)
(明年改種五榖以休地諸法並同薑田)又按區田每區方一尺五寸(賈氏)
(說又有方深各六寸及方九寸深六寸諸法)蓋欲於城上斜坡立區故為此
製若平田亦可變通
畸零法解(乘法)
假如其處地畆被水所淹今涸出五分之四於中又有
高地居七分之四問若干
答曰高地為三十五之十六
法用母乘母子乘子兩母(五七)相乘
三十五為母兩子(四四)相乘十六為
子乘得三十五之十六
解曰分總地為五分而涸出居其四四又將此涸出之
四分分為七分而高地居其四若以總地分三十五分
則高地居其十六矣
本法置實子五之四以法子七之四乘之得十六為實
法母七為法除之得五之二又小分七之二為高地
然七除不盡當用通分法以小分母七通原分母五為
三十五得數二通為十四加入之二共十六是三十五
之十六也
今不用七除其子而以七乘其母得數亦同(母既七倍而子不動)
(是七之一也故乘母即同除子)
以數明之設原數三千五百畆内涸出五之四是二千
八百畆也以此二千八百畆分為七分而高地居其四
是一千六百畆也則高地於原數為三十五之十六矣
又假如有米一宗内分七之四於預備倉收貯又於預
備倉内取五之四先給賑荒問若干
答曰三十五之一十六法見前
解曰分總米為七分而預備倉得其四又分預備倉米
為五分而先給賑濟者得其四若以總米分為三十五
分則先給賑濟者得其十六
本法置實七之四以法子之四乘之得一十六為實
法母五為法除之得三又五之一如法用通分以小分
五通大分七為三十五又通得數三為十五加子一為
十六即三十五之十六也
今不用五除子而用五乘母即得三十五之十六省通
分矣(母乘得五倍則子為五之一)
以數明之設原米四千二百石分為七分而取其四
為預備倉是二千四百石也預備倉米又分五分而
取其四以給賑是一千九百二十石也若分原米為
三十五分每分一百二十石則給賑米得十六分(四千)
(二百是三十五個一百二十石一千九百二十是十六個一百二十石故也)
又法
法用倒位互除以代乘法以法子四
除實母七得一七五為母以法母五
除實子四得八為子乘得一七五之八
各進位而倍之即三十五之十十六
本法四乘五除今不以四乘其子而反以四除其母即
得數同也(母既改為四之一而子不動即子為四倍故除母可代乘子也然除法多有不盡不如母)
(乘母子乘子為便)
還原
畸零除法
假如營兵奉裁五之一留五之四其所支月餉為某倉
米七之四問未裁時月餉幾何
答曰該支倉米七之五
法用倒位互乘以當除法以法子之
四乘實母七得二十八為母以法母
五乘實子之四得二十為子除得二
十八之二十約為七之五
解曰兵奉裁留五之四其原額未裁則五之五也故其
原支倉米亦必七之五乃四而增一之比例
本法置實七之四以法母五乘之得七之二十為實
以法子之四為法除之得七之五
今不用四除其子而以四乘其母得數亦同(母既四倍於原母而)
(原子不動如四之一故乘母可代除子)
又法
法以法母五除實母七得一四為母
又以法子之四除實子之四得一為
子除得一四之一約之亦得七
之五
此不用五乘其子而以五除其母得數亦同(母既五除則為原母)
(五之一而原子不動如五倍矣故除母可當乘子)
論曰以上三法所得並同然倒位乘尤妙蓋以乘代除
則無畸零不盡之數故也
以數明之設營兵三千其五之四則二千四百也倉
米二千五百二十石其七之四則一千四百四十石
也七之五則一千八百石也兵二千四百而給米一
千四百四十石則兵三千當給一千八百石
還原
用倒位互除以代乘法法子四除
實母二十八得七為母法母五除實
子二十得四為子乘得七之四復合
原數
問倉米七之四可給營兵五之四若倉米全發給兵幾
何
答曰給兵五之七
如法倒位以法子之四乘實母五得
二十為母以法母七乘實子之四得
二十八為子除得二十之二十八約為五之
七子大於母收為一又五之二是可給原額兵而
仍多五分之二也
解曰原給倉米七之四而今全給七分是四分而增其
三也故兵亦四分增三(於五之四增五之三即為五之七)
本法置實之四以法母七乘之得五之二十八為實法
子四為法除之得五之七(今以四乘母代四除子與前條同)
以前數明之倉米二千五百二十石分為七分則每分
三百六十石營兵三千分為五分則每分六百以倉
米四分給兵四分是每米三百六十石給兵六百名
也今倉米全給為三百六十石者七則兵為六百者
亦七是四千二百名也除三千名滿原額净多一千
二百名之餉為五分之二(以七除五不盡故不用又法)
歷算全書卷二十九
