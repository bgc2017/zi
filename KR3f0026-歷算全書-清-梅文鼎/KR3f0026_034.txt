歷算全書卷三十
宣城梅文鼎撰
籌算一
作籌之度
凡籌以牙為之或紙或竹片皆可長短任意以方正為
度
凡籌背面皆平分九行每行以曲線界之為兩半圓狀
凡籌背面皆相對第一籌之隂即為第九便檢尋也二
與八三與七四與六五與空位皆倣此共五類類各
五籌當珠盤二十五位或更加之亦可外有開方
大籌為平方立方之用詳見别卷
籌式列左
作籌之理
凡籌每行以曲線界之成兩位其下為本位上為進位
假如本位一兩則進位為十兩
凡列兩籌則行内成三位下之進位與上之本位兩半
圓合成一位故也列三籌則成四位列四籌則
成五位五籌以上皆倣此
凡籌有明數有暗數明數者籌面所有之數是也暗數
者行數也假如第一行即為一數第二行即為二數
凡籌與行數相因而成積數假如第二籌之第四行即
為八數第九籌之第八行即為七二數
籌算之資
凡用籌算當先知併減二法今各具一則
併法
併者合也合衆散數為一總數也又謂之垜積其法
先列散數自上而下對位列之千對千百對百十對
十單對單以類相附
列訖併為一總數其法從最下小數起自下而上
如畫卦之法數滿十者進位作暗馬而本位書其
零
恐混原數故以此
别之便覆核也
假如有米三千四百八十石又五千六十八石又二
萬六千九百石合之共幾何
如圖散數三宗依法併之為
一總數得三萬五千四百四
十八石
減積法
減者去也于總數内減去幾何則知其仍餘幾何也減
與併正相反減而剰者謂之減餘
其法以應減去之數列左以原有之總數列右而對
減之
千對減千百對減百十對減十單對減單
減而盡者抹去之減而不盡者改而書之
本位無數可減合上位減之假如欲減八十而原數
只有七十但其上位有一百則合而減之于一百七
十内減八十仍餘九十
假如有銀三十二萬五千三百一十兩支放過二十九
萬五千三百五兩仍餘幾何
依法減之仍餘三萬
五兩
十萬千百十兩
如圖先于三十萬内減二十萬餘一十萬改三為一
次減九萬而萬位無九合上位共一十二萬減之
餘三萬抹去一二改書三
次減五千次減三百皆減盡皆抹去之書作
次減五兩而兩位無五于一十兩内減之抹去一
改書五減訖餘二三
凡算有乘有除乘者用併法除者用減法
籌算之用
凡算先别乘除乘除皆有法實實者現有之物也法者
今所用以乘之除之之規則也
凡籌算皆以實列位而以籌為法法有幾位則用幾籌
如法有十係兩位則用兩籌法有百係三位則用三
籌
凡法實不可誤用唯乘法或可通融若除法必須細認
俱詳後
乘法
勿菴氏曰凡理之可言者皆其有數者也數始於一相
緣以至於無窮故曰一與一為二二與一為三自此
以往巧歷不能盡乘之義也故首乘法
解曰乘者增加之義其數漸陞如乘高而進也亦曰因
言相因而多也珠算有因法有乘法在籌算總一乘
法殊為簡易
法曰凡兩數相乘任以一為實一為法
假如以人數給糧或以人為實糧為法或以糧為實
人為法皆可
凡算先列實(列書之于紙或粉板亦可依千百十零之位列之自左而右)
次以法數用籌乘之
法有幾位則用幾籌
(假如法為六十四則用第六第四兩籌法為三百八十四則用第三第八第四共三籌)
凡乘皆從實末位最小數起
視原實某數即於籌其行取數列之
(假如實是二則取第二行數)
凡列乘數皆自下而上如畫卦
凡實有幾位挨次乘之但次乘之數必高于前所列
之數一位
(假如先乘者是單次乘者必是十故進位列之)
乘訖乃以併法併之合問
又法
凡法尾空位者省不乘但于併數之後補作圈于其
下以存其位尤為簡捷
如上圖乘訖併得三
因法尾有空又補
作一圈是為三
則知所得三萬
定位法見前
又若田為一畝二分則所得為三合何也畝下有分
故得數之三其尾又是勺下之分也此定位
之精理須細審之
一四二四四四五七五共九位因實尾空位(無零年故也)用
省乘法加一于末位下共十位而以尾命為分得
一十四萬二千四百四十四日五十七刻五十分合
問
除法
勿菴氏曰天地之道盈虚消息而已無有盈而不虛無
有消而不息乘者息也盈也除者消也虚也二者相
反而不能相無其數每相當不失毫釐如相報也邵
子曰算法雖多乘除盡之矣故除法次之
解曰除者分物之法也原作幾何今作幾分分之則成
各得之數而除去原數也有歸除有商除珠算任用
籌算則獨用商除為便以意商量用之故曰商除
法曰凡除以所分之物為實今欲作幾分分之為法法
與實須審定倘一倒置則毫釐千里矣(假如有糧若干分給若干)
(人則當以糧為實以人之數為法除之盖糧數是所分之物人數是用以分之之法也若倒用以糧分人)
(則所誤多矣)凡法有幾位則用幾籌乃列實(自上而下直書)
(之)視籌之第幾行中積數有與原實相同者或略
少於實者用其數以減原實而得初商有不盡者
如法再商或三商以上皆如之實盡而止餘實不
滿法以法命之
凡商數皆以籌之行數為其數(假如所減是等第一行即商一數第二行)
(即商二數)
書商數法曰凡書商數皆與減數第一位相對若所
減第一位是則補作于原實首位上而對之(此定)
(位之根)
定位法曰除畢以商得數與原實對位求之皆于法首
位之上一位命為單數(程大位曰歸于法前得零古法實如法而一是也)
此有二法有法少實多者從原實内尋法首位認
定逆轉上一位命為單數(如米則為單石錢則為單文之類)既得單
數則上而十百千萬下而分秒忽微皆定矣此為正
法
有法反多實反少者乃變法也法從原實首位逆溯
而上至法首位止又上一位命為單數(此是虚位借之以求實數)
既得單數乃順下求之命所得為分秒之數
初商除盡式法此欲分為七十二分也故以七二為
假如太陽每法用兩籌
歲行天三百實三六如圖先列三百六十度
六十度分為百十為實次簡兩籌行内有
七十二候每三六與實相同用減
候幾何度原實恰盡次查所簡
(答曰)每候五度係籌之第五行商作五
又查所減第一位是三將商數五對三字書之
定位法曰此法少于實也宜于原實内尋十度位即法
首位也法首再上一位為單度定所得為五度
假令實是三千六百則所得為五十度如後圖
定位法曰此亦法少于實也法亦于
原實内尋法首十位再上一位為單
位單位空補作圈再上一位是十度
定所得為五十度用籌同而得數迥
異定位之法所以當明也
再商式法此欲分為一十二分也故以一二
假如皇極經世為法用兩籌
一元共一十二實如圖列實(一元總數)簡
萬九千六百年一二九六籌第一行是一
分為一十二會十萬千百十年二商作一數(第一行故)
各幾何(商一)減實一十二萬
答曰每會一萬餘九千六百不盡
八百年再用籌如法除之
又因所減數是一二故于原實首補作圈而以商
得一對此位書之(即所減籌上第一位也)此定位之根不可
錯須細審之
簡兩籌第八行是九六與餘實
相合再商八(第八行故也)減餘實九千
六百恰盡
此所減數亦是九六故以商得
八進位書之以暗對其
如此審定商數位置已知不錯而初商次商隔一位
不相接是得數有空位也乃于其間補作圈為一
八
假如隔兩位則作兩圈三位以上倣此求之若非于
商數審其位置鮮不誤矣此算中一大關鍵也非此
則不能定位
定位訣曰此亦法少于實也從原實内尋法首十位再
上一位是單年單位空補作圈又上一位是十十亦
空亦補作圈又上一位是百知所得為八百年也知
百知千萬矣定為一萬八百年
假如黃鍾之法此欲分得二千一百八十
實一十七萬七乃為一分故以二一八
七千一百四十七為法用四籌
七其分法二
千一百八十
七問若干分
答曰八十一
分
二千一百八十七再商之
簡籌第一行是二一八七正合
餘實再商一除實恰盡
次商一進位書暗對所減位
定位訣從原實尋法首位千逆轉
上一位得單分則餘位皆定
按籌算原書于定位頗略又其為法原實横而商數縱
各居其方不相依附定位頗難故雖歷書間有訛位今
特詳之而兩兩直書于定位尤易亦足見余之非好為
異也
四商法
假如有小珠三十四此欲分為九分有竒也(以錢)
萬三千一百五十四(為主則六分五釐是其竒零九分之分去聲)故
粒換得大珠重九錢以(九六五)為法用籌三根
六分五釐每大珠一如後圖列實先簡籌第(三)
錢換小珠幾何粒行(二八九五)略少于實商(三)減
答曰每錢換三萬五實(二十八萬九千五百)餘實(五萬三千六百)
千五百六十粒(五十四)以候續商
次簡籌第(五)行是(四八二五)為略少于餘
實商(五)減餘實(四萬八千二百五十)仍餘(五千)
(四百四)以待第三商
原實又簡籌第(五)行是(四八二五)為略少于餘
實又商(五)減餘實(四千八百二十五)仍餘
商數(五百七十九)知尚有第四商也
又簡籌第(六)行是(五七九)與餘實恰合
四次商數俱對首位商作(六)除餘實(五百七十九)恰盡
定位訣從原實中尋法首(單)位逆轉上一位得(單)粒定
所得為(三萬五千五百六十粒)命為大珠每錢所換小珠之數
五園問曰法是錢數實是粒數不類也何定位亦如
是準乎勿菴曰此定位之法所以的確不易也且錢
與粒不類子疑之固矣抑知單與單之為一類乎蓋所問
是每錢若干故錢數為單位若問每分若干則法首
錢數為十位得為(三千五百五十六)矣故定位須詳問意乃
要訣也
法有籌式法此欲分作(九百七分)也故以(九七)
假如布二萬為法用三籌
一千七百六如圖簡籌第(二)行
十八丈給與(一八一四)商作(二)減實
九百七人(一萬八千一百四十)餘(三千六百)
各幾何(二十八丈)次簡第(四)行
答曰(每人二十四丈)(三六二八)商(四)除實盡
以上例皆法少于實故法首在原實中乃本法也
以上兩例皆法多于實者其法首位或在原實中必
原實首位也或不在原實中則在其原實上幾位也
要之皆不能滿法其所得必為分秒乃通變之法也
論曰除者分也吾欲作幾分分之則為法所分之物為
實所分之物能如所欲分之數則為滿法滿法則成
一整數假如(三十六)人分布而布有(三十六)丈則各人分
得一丈古云實如法而一正謂此也程大位算法統
宗曰歸扵法前得零其意亦同此立法之本意也
乃有所分之物原少于所欲分之數是不滿法也既
不滿法則不能成一整數而所分者皆分秒之數假
如(三十六)人分布(二十七)丈則每人不能分一丈只各得
(七尺五寸)是于(一丈)内得其(七分五秒)也然必先知整數然後可
以知分秒故必于原實上虚擬一滿法之位若曰能
如此則分得整數矣而今不能則所分得者皆分秒
也于是視所擬整數虚位距商數若干位而命之若
相差一位則得為十之一(如兩有錢尺有寸)隔位則為百之
一(如兩有分丈有寸)此乃通變之法要其為法上得零則一
而已矣
又論曰此原實即不滿法也若餘實不滿法除之終不
能盡則以命分之法御之詳後
命分法
法曰凡除法商數至單已極而有餘實不盡者不能成
一整數也則以法命之此有二法
一法即以除法為命分不盡之數為得分則云幾十幾
分之幾
解曰命分者以一整數擬作若干分而命之如滿此數
則成一整數而今數少故命之也得分者今所僅有
之數在命分數内得若干也(命分者古謂之分母得分者古謂之分子)
假如古歷以九百四十分為日法每年三百六十五日
又九百四十分日之二百三十五約為四之一(約法見後)
一法除之至盡古歷家所謂退除為分秒是也單下有
一位命為十分之幾有兩位命為百分之幾十幾三
位則命分千四位則命分萬皆以除得數為得分
假如授時歷法每歲三百六十五日二千四百二十五
分是以萬分為日即命分也
式如後
假如五尺為步每方一步積二十五尺今有積二百四
十尺得若干步
答曰九步又五分步之三
如圖列實簡籌第九行是二二
五商作九(第九行故)減實二百二十
五尺餘一十五不盡以法命之
命為九步又二十五分步之一
十五約為五之三(約分法見後)
若用第二命分法再列餘實加
位商之以得其分秒如後
餘實下加一圈則一十五尺通
為一百五十分可再商矣
簡等第六行是一五商六分
除餘實恰盡
命分九步六分(即十分步之六)
(命分第二法與法多于實除法同故皆曰除分秒也)
若餘實為一十六尺則又不盡一尺法當於不盡一
之下再加一圈為一使此一尺化為一百分而
再除之得四釐共九步六分四釐(即百分步之六十四)
約分法
約分者約其繁以從簡也
法曰母數子數平列相減而得其紐數即以紐數為法
轉除兩原數而得其可約之分
凡約分相減不拘左右但以少減多如左少右多則以
左減右左多右少則以右減左若減之後或多者變
而少則轉減之必減至左右相同無可減而止即紐
數也(若一減之即得紐數則不必轉減)
解曰紐數者互相減之餘數相等者也以此除兩數則
皆可分乃兩數之樞紐
若相減至盡而無紐數者則不可約
假如母數二十五子數一十五約之若干
畣曰五之三
一先以(十五)復以(一十)五
二五減(二十五)一轉減(十五)一
一五餘(一十)一五餘(五)五
復以(五)轉減(一十)餘(五左右皆五即為紐數)以紐數(五)為法轉除
母(二十五)得(五)除子數(一十五)得(三)故曰五之三蓋母數
是五個五子數是三個五也
此轉減例
又如母數九百四十子數二百三十五約之若干
畣曰四之一
先以(二百三十五)減(九百四十)餘(七百五)又減之餘(四百七十)又減
之餘(二百三十五)
左右皆(二百三十五)即紐數也
以紐數(二百三十五)轉除母數(九百四十)得(四)除
子數(二百三十五)得一故曰四之一
母數是四個(二百三十五)
子數是一個(二百三十五)
此不轉減例
歷算全書卷三十
