歷算全書卷二十三
宣城梅文鼎撰
歷學騈枝卷三
月食通軌
錄各有食之望下數
經望全分盈縮歷全分盈縮差全分
遲疾歷全分遲疾限數遲疾差全分
加減差全分定望全分(將本日日出分推在卯時何刻望在何刻已下者退一日)
(也只說見定朔望條夘時舉例言也按其定望退一日據小餘在日出分已下斷之并不必求時刻)
入交泛日全分定入遲疾歷定入遲疾限(此限)
(與前仝者便不必書出損益分并行度按此處損益分不言何用似總不必書出)
定限行度晨分(月入之時刻也先于復圓有帶食)日出分
日入分昏分(月出之時刻也後于初虧有帶食)
(按晨昏分所以定更點也其帶食分只用日出入分不用晨分蓋晨昏日未出月則猶見昏前日已入月)
(則已見也註誤)
天正赤道度天正黃道度交常度交定度
已上諸法皆與日食同
推夘酉前後分法
視定望小餘如在二千五百分已下者就為夘前分若
已上者去減半日周五千分為夘後分又如在七千五
百分已下者内減去五千分為酉前分已上者去減日
周一萬分為酉後分
按凡夘酉前後分皆距子午言之夘前分是距子正
後之分故即以小餘定之夘後分是逆數午正前之
距分故以小餘減半日周酉前分是順數午正後之
距分故以半日周減小餘酉後分是逆數子正前之
距分故以小餘減日周
推時差分法
置日周一萬内減去夘前夘後分或酉前酉後分(滿千分者)
(命為十分滿百分者命為单分)為時差分
推食甚定分法
置所推時差分如入定望小餘共得為食甚定分
按日食氣刻時三差皆起于唐宣明歷非月食所
用後來諸歷或有用月食時差者皆于近夘酉則差
多近子午則差少又皆子前減子後加今依通軌所
推則近夘酉者差反少近子午者差反多又不問子
前子後皆以加定望小餘而無減法種種與歷經相
反竊依元史月食時差法定之如左
依歷經求月食甚定分法
置卯酉前後分(有千法實皆定三有百法實皆定二)自相乘(言十加定一子)退二
位去二子如四百七十八而一(去二子不滿法去一子以所定二子為百分一)
(子為十分)為時差子前以減子後以加皆加減定望分為食
甚定分依發斂加時求之即食甚時刻
按卯酉前後分即前所推卯前卯後分或酉前酉後
分自相乘者如求南北差法即以所得卯酉前後分
為法與實也凡卯酉前後分皆自子午起算以自相
乘則近卯酉差多近子午差少矣退二位法同日食
時差以得數後有百萬退作萬有十萬退作千而後
除之也如四百七十八而一者是以四百七十八除
之如四百七十八分為一分也子前減子後加者凡
望時之月在日所衝故日在子前月乃在午前日食
午前減故月食亦子前減也日在子後月乃在午後
日食午後加故月食亦子後加也其差多者不過一
百三十分有竒而止故以四百七十八為法除之也
推食甚入盈縮歷及食甚入盈縮差併食甚入盈
縮歷行定度三法俱與日食同只換望日
推月食入隂陽歷法
視所推交定度如在交中度一百八十一度八九六七
已下者便為入陽歷也如在已上者内減去交中度餘
為入隂歷也
按交中度數原生于隂陽歷月入陽歷則在黃道南
行一百八十一度有竒畢復入黃道北而行隂歷一
百八十一度有竒畢則又復入陽歷矣行陽歷隂歷
各一次謂之交終半之為交中今交定度在交中度
已下是月在黃道南就為入陽歷度數也其在已上
者是月在黃道北故于交定度内減去交中度命其
餘為入隂歷度數也陽歷數自交初起算隂歷數自
交中起算也
推交前交後度法
視所推月食入隂陽歷如在後凖一十五度五十分已
下者便為交後度也如在前凖一百六十六度三九六
八已上者置交中度内減去隂陽歷餘為交前度也
按凡言交者皆月出入黃道斜十字相交之際也凡
隂歷在後凖已上者是月入隂歷去交未遠尚在十
五度内故為隂歷交後度也凡隂歷在前凖已上者
是將交陽歷距交已近只在十五度内故為隂歷交
前度也陽歷同月食限只一十三度五分而此言
十五度五十分者蓋以盈縮差加減之則亦十三度
有竒故以十五度五十分為食凖也
推月食分秒法
置月食限(一十三度五分)内減去交前或交後度(十度定三单度定二)
(得按定子法疑有誤若如所云則月食必無十分者安有既内外之分乎愚意當是十度定五单度定四也)
以定法八十七分(去一)為法除之(不滿法去一子所定有三子為十分二子為单)
(分)為月食分秒不及減者不食十分已下者用三限辰
刻法已上者用五限辰刻法
按月食限度多于日食者闇虚大而月小也故不問
隂陽歷但距交前後一十三度五分内即能相掩
而有食也定法八十七即食限十五分之一故定望
正當交度其食十五分漸離其處食分漸殺假如距
交前後一度七十四分則于食十五分内減二分只
十三分又如距交前後九度五十七分則于食十五
分内減十一分只食四分也故置食限以距交度減
之即于食十五分内減去若干分秒減不盡者如定
法而一為所食之分秒也如食限不及減則是距交
前後度多于月食限(已在十三度五分之外)闇虚雖大至此不
能相掩斷不食也
推月食定用分法
置月食分三十分内減去所推月食分秒餘(十分定三单分定二)
為實却以月食分秒(十分定三单分定二按十分宜定一今加定三子者以分下有十有)
(秒也故亦以定六子為百分法實共加定四子也)為法乘之(言十定一定有六子為百分五子為)
(十分)得為開方積立天元一於单微之下依平方法開之
得為開方數(言十定一)復以四千九百二十分(定五乘按以六分八百)
(二十分得四千九百二十分又按元史數同日食)為法乘開方數(有十定一)得數又
以其前推得定限行度(去四子空度去三子)為法除之(不滿法去一子定有)
(二子為百分一子為十分)得數為所推定用分也
定用分者月食自初虧復滿距食甚之時刻也然日
食只十分而月食則有十五分者闇虚大也闇虚之
大幾何曰大一倍何以知之以算月食用三十分知
之也依日食條論兩員相切法闇虚半徑十分月半
徑五分兩邊相切則兩半徑聫為一直線共十五分
為兩心之距以此距線用闇虚心為心運作大圓正
得全徑三十分也此大圓邊距闇虚邊四周各五分
為兩圓相切時月心所到之界其兩心之距十五分
即大圓半徑常用為弦而以食甚時兩心之距為句
食甚時月心侵入大圓邊之數為句弦較其數與月
食分秒同以此與大圓全徑相減餘即句弦和和較
相乘為股實開方積也其開方數為股即自虧復至
食甚月心所行之白道也
四千九百二十乘者何也依日食條論又是十分八
百二十而用其六也蓋所得月體又小于日一分也
然歷經所用與日食同此不同者蓋改率也或亦改
三應數時所定
推三限辰刻等法
置所推食甚定分内減去定用分餘為初虧分也不及
減者加日周減之復置食甚定分内加入定用分共得
為復圓分也滿日周去之時刻依合朔推之
按三限辰刻同日食理不復贅
初虧時兩心之距為弦(即大員三十分半徑)
食甚時兩心之距為句
食甚時月心侵入大員界八分為句弦較
自虧至甚月心所行之度分為股(甚亦復亦同)
此以月食八分為例餘可倣推
又此係陽歷故月在闇虚南若隂歷反此論之
推既内分法
置月食限一十五分(按歷經作月食既一十分今從之)内減去所推月
食分秒自单以下全分餘(十分定三单分定二有句誤按此處無十分當是分定)
(二十秒定一也)為實却以月食分秒自单分以下分秒(单分定二十秒)
(定一)為法乘之(言十定一所定有五子為十分四子為单分)得為開方積立天
元一於单微之下依平方法開之得為開方數就置開
方數(十分定五单分定四分按十分定五句誤此處開方數必無十分當作十秒定三有定四也分加定四子者以有秒微也)
復以四千九百二十分(定五)為法乘之(言十定一)得數又以所
推定限行度(去四子空度去三子)為法除之(不滿法去一子所定有六子為百分五子)
(為十分)得為所推既内分也
按歷經原是以既内分與一十分相減相乘此則改
為一十五分今以大圓掩小圓率求得既内小平圓
徑一十分與歷經合故斷從歷經
月食十分則既矣此時月體十分全入闇虚而月之
邊正切闇虚之心兩心之距正得五分以得五分為
半徑自闇虚心作小平圓其全徑十分其邊各距闇
虚心五分為食既時月心所到之界過此界則為既
内矣假如月食十二分食既時月心正掩小圓之邊
食甚時月體則入闇虚内二分而月心亦侵入小平
圓二分故即用此二分為句弦較以與小平圓全徑
相減餘為句弦和和較相乘得積開方得股即月心
從食既至食甚在闇虚内所行小平圓内之白道也
於是亦如前法變為度分而計其行率則知月入闇
虚以後行至食甚所歷時刻之數而命為既内之分
也食甚至復圓同論
乙為闇虚心初虧時月心在甲以其邊切闇虚於庚
兩心之距為乙甲與壬乙等大員半徑十五分也為大
弦食甚時月心行至丁丁甲度分為自虧至甚之行
與甚至復丁戊之行等為大股丁乙三分食甚時兩心
之距為句壬丁十二分食甚時月心侵入大圓内之
數也為句弦較
食既時月心在丙兩心之距乙丙與生光時己乙之
距等小圓半徑五分也為小弦丙丁為月心自既
至甚之行與甚至生光己丁之行等為小股丁乙
仍為句午丁二分為食甚時月心侵入小員之數
為句弦較丙至丁所歷時刻與己至丁時刻等是
為既内分甲至丙所歷時刻與己至戊等是為既
外分此以隂歷月食十二分為式餘皆倣論
開方數
壬丁十二丁癸十八相乘二一六平方開之得丁甲
十四(六九)午丁二分丁辰八分相乘十六平方開之得
丁丙四分
推既外分法
置所推定用分内減去既内分餘為既外分也
按既外分者是月食初虧至食既生光至復圓所歷
時刻也原所推定用是自虧初復末中距食甚之數
乃既内既外總數也故於其中減去既内時刻其餘
即既外時刻
推五限辰刻等法
置食甚定分内減去定用分為初虧分初虧分加既外
分為食既分食既分加既内分為食甚分食甚分加既
内分為生光分生光分加既外分為復圓分也不及減
者加日周減之滿日周去之推時刻同前
按月食有五限辰刻異於日食者日食只十分故其
食而既也即其食甚也才食而既其光即生則其生
光之分亦即其食甚也若月食則十五分自食既以
至生光歷時且久為刻皆殊中折二數以知食甚總
計虧復故有五限也以定用減小餘者所算定用原
是食甚距初虧之數也故以減食甚得初虧以既外
加初虧及生光者所算既外原是初虧距食既及生
光距復圓數也故以加初虧得食既以加生光得復
圓至於所算既内原是食既至生光折半之數即是
食既生光中距食甚之數也故以加食既得食甚以
加食甚得生光不及減加日周者是食甚在子正後
初虧等在子正前也加滿日周去之者是食甚等在
子正前復圓等在子正後也凡言時刻同前者皆依
發斂加時推法也
推月食入更點法
視望下盈縮歷與太陽立成同日之晨分就加一倍得
數用五千分而一(句誤按當作五而一下同)得為更法分也(定數滿法得千)
(分不滿法得百分也)將更法又用五千分而一得為點法分也(定數)
(滿法得百分不滿法得十分也也句誤甚按當作滿法者百已上不滿法者二百已上大約更法有干者則)
(不滿法)
按更點倍晨分者凡日入後二刻半而昏日未出前
二刻半而晨晨則辨色未昏則不禁行晨昏啓閉以
此為節是益晝五刻損夜五刻聖人扶抑之道無所
往而不存也其晨分皆自子正距晨之數夜之有晨
分猶日之有半晝分也逆推子正前距昏之數正與
相等故倍其晨分即為夜刻也於是以五除之即其
夜每更所占時刻之數也假如晨分二千五百倍之
五千五除之則知每一更中占有一千分也滿法者
是在五千分已上故知得數為千分不滿法者是在
五千分已下故知得數為百分於是又置更法以五
除之即其夜每點所占刻數也假如更法分一千五
除之則知每點中占有二百分也其點法得數無論
滿法不滿法總是百分不必定數又除法只是单五
每夜五更每更五點故以五除之也
推初虧等更點法
視初虧分如在晨分已下者就加入晨分共為初虧更
分也如在昏分已上者内減去昏分餘為初虧更分也
却以元推更法分為法除之命起一更算外得為初虧
更數也其不及更法數者却以元推點法分為法除之
命起一點算外得為初虧點數也次四限更點倣此而
推各得更點也(若在日入以上昏分以下者命為昏刻若在日出以下晨分以上者命為晨刻)
(皆無更點)
按初虧等分如在晨分已下者是在子後也加入晨
分是逆从子前昏刻算起也其在昏分已上是在昏
後也故減去昏分是減去晝刻截从初昏算起也二
者總是从初更初點起算(初更初點即一更一點)加減後得數
即知今距初更初點已若干數於是以本日更法除
之其滿過更法有幾數便知已過幾更故算外命為
更數也其不滿更法而餘者則正是初入此更以來
未滿之數故又以點法除之其滿過點法有幾數便
知在此更中已過幾點故算外命為點法便知所推
初虧等尚在苐幾更苐幾點中未滿也其有總不滿
更法數者則只是初更其有以點法除總不滿法者
則只是初點也
推月食起復方位法
視月食入隂陽歷如是陽歷者初起東北食甚正北復
圓於西北也如是隂歷者初起東南食甚正南復圓於
西南也若食在八分已上者無論隂陽歷皆初起正東
復圓於正西也
按月食起復方位主月體言之即人所見月之上下
左右也以卯位言之則東為下西為上北為左南為
右以酉位言之則東為上西為下南為左北為右也
月食入隂陽歷亦主月道言之如是陽歷食是月在
日道南其入闇虚被掩者在北故食起東北甚於正
北復於西北也如是隂歷食是月在日道北其入闇
虚被掩者在南故食起東南甚於正南復於西南也
其食在八分已上者是月入闇虚正相掩而過故食
起正東復於正西也凡闇虚在日所冲太陽每日行
一度闇虚隨之而移月之行天既視闇虚為速故其
食也皆闇虚先在東月自西來道有必經無所於避
遂入其中而為所掩既受掩矣則行而出於闇虚之
東却視闇虚又在月西故月食虧初皆在東復末皆
在西也又按歷經此亦據午地言之
推月有帶食分法同日食推
月有帶食例
昏(月未出已復光若干月已出見復光若干)晨(月未入見復光若干月已入未復光若干)
昏(月未出已食若干月已出見食若干)晨(月未入見食若干干月已入不見食若)
按月帶食法同日食而只互易其晨昏書法者何也
蓋月食於望望者日月相望故日出則月入月出則
則日入故易日之昏為月之晨易日之晨為月之昏
也其所以同者何也假如日入分在復圓分已下是
復圓在日入月出後于日為見食甚不見復末者於
月則為見復末不見食甚也若日出分在復圓分已
下是復圓在日出月入後於日為見復末不見食甚
者於月則為見食甚不見復末也之二者總是以食
甚分減日出入分其所推帶食則總是日月出入前
距食甚之數其以減食分而餘者亦總是日月出入
後未復光之數故總謂之已復光未復光而以
所推帶食分錄於前也又如日入分在初虧分
已上是初虧在日入月出前於日為見虧初不
見食甚者於月則為見食甚不見虧初也若日出分
在初虧分已上是食甚在日出月入後於日為見食
甚不見虧初者於月則為見虧初不見食甚也之二
者總是以日出入分減食甚分其所推帶食分則總
是日月出入後距食甚之數其以減食分而餘者亦
總是日月出入前已食之數故總謂之見食不見食
而以所推帶食分錄於後也(餘詳日食)又按歷經月食既
者以既内分減帶食差餘進一位如既外分而一以
減既分即帶食出入所見之分不及減者為帶食既
出入蓋凡所推帶食差是食甚所距日出入時刻今
以既内分減之而餘者即是日出入後距食既前或
日出入前距生光後其間所有時刻也進一位者即
是以既分乘之也又以既外分除之則知其食既生
光距日出入時于既外全數中分得幾許時刻即知
其於食既全數内分得幾許食分也故以減食既十
分即為帶食出入之食分也不及減者是帶食差少
於既内分其日出入分已在既内分内故為帶食既
出入也
推食甚月離黃道宿次度法
置元推食甚入盈縮歷行定度全分如是盈歷者加半
周天一百八十二度六二八七五及天正黃道箕宿度
其得為黃道定積度也如是縮歷者止加天正黃道箕
宿度内減去七十五秒餘為黃道定積度也無論盈縮
歷皆以其黃道各宿次積度鈐挨及減之餘為食甚月
離黃道某宿次度分也
按月食黃道定積度者逆計月離度前距天正日躔
宿度之數也元推食甚入盈縮歷行定度則是所求
日躔距天正宿度乃月食所冲也如日在北正月食
於南正故盈歷加半周天便是食甚月離宿度又加
天正箕宿度便知食甚月離距黃道箕宿初度若干
也其縮歷行定度則是日躔距夏至度數故即用其
數為月離蓋月食日冲日躔夏至宿後第幾度月食
即亦在冬至宿後第幾度故不必加半周天也内減
去七十五秒者盈歷縮歷相距半歲周不及半周天
七十五秒減黃道積度鈐法仝日食不贅
依授時歷經黃赤道法(勿庵補定)
求四正後赤道積度
置天正冬至所在宿赤道全度以天正赤道減之餘為
距後度以赤道宿度累加之即各得其宿距冬至後赤
道積度加滿象限去之為四正宿距後度亦以赤道宿
度累加之滿象限去之即各得其宿距春分夏至秋分
後赤道積度
按四正者四仲月中氣即二至二分也凡天正赤道
度是天正冬至前距其宿初度之數故以減其宿全
度即各得冬至後距其宿末度之數也於是以後宿
赤道累加之即知冬至後各宿距冬至度所積之數
也滿象限去之者加滿象限是其宿當四正所躔故
減去象限即知四正後距其宿末度之數也於是又
以赤道各宿度累加之即各得四正後各宿所距四
正度之數也
求赤道變黃道
置各宿距四正後赤道積度用黃赤道立成視在至後
者以第三格赤道積度相挨者減之餘(有十定三有分定二)為實
以其上第二格黃道率乘之(不用乘只加定四子)以下第四格黃
道率為法除之(有度去四有十去三不滿法再去一視定有四子為度三子為十分)加入
第一格黃道積度即為其宿距至後黃道積度其夏至
後再加周半天即各得其宿距天正黃道積度也若在
分後者以第一格赤道積度相同者減之只用小餘(有十)
(定三有分定二)為實以下第四格黃道率為法(有度定四度定三)乘之
(言千定一)得數以其上第二格赤道率除之(不用除只去四子視定有四子)
(為度三子為十分)加入第三格黃道積度即得其宿距分後積
度其春分後再加一象限秋後分再加三象限即各得
其宿距天正黃道積度也於是各置其宿距天正黃道
積度以相挨前一宿黃道積度減之即各得其宿黃道
本度也(秒就近約為分)
按至後不用乘者其立成黃道率只是一度乘過數
不動故只加定四子也分後不用除者其立成赤道
率亦是一度除過數亦不動故只虚去四子也夏至
後加半周天春分後加一象限秋分後加三象限者
此所求黃道積度皆距四正起算故各以四正距天
正黃道數加之即其宿前距天正之數也蓋至後黃
道雖減于赤道分後黃道雖加于赤道其實至四立
之後則加之極而反減減之極而反加總計一象皆
得九十一度有竒此天道如環平陂往復間不容髮
也減前宿積度為其宿本度者積度即是距天正數
原包前宿在内故減之即得本度也(秒就近約為分者凡秒五十已)
(上收為分已下棄之就整數也其七十五秒寄虚度)
求天正冬至黃道度
置周天度(三百六十五度二五七五)内減天正前一宿距天正黃道
積度餘命為天正冬至宿黃道度分也若逕求者置象
限以其年天正赤道度減之餘為天正前宿距秋分後
赤道積度依赤道變黃道法求出其宿距分後黃道積
度以減象限餘為天正黃道度
按周天度是自天正後積至天正前黃道總數故減去
前宿距天正黃道積度即得天正距所在宿初度之
數也逕求法置象限者即是自天正前距秋分後赤
道總數也内減去天正赤道度其餘即是前宿距秋
分後赤道積度也赤道變黃道法即是以立成第一
格積度減餘以第四格度率乘以第二格度率除加
入第三格積度而命為前宿距秋分後黃道積度也
又以減象限者此所為象限即是自天正前距秋分
後黃道總數故減去前宿距秋分黃道積度其餘即
是天正冬至距其宿初度黃道之數也
求黃道宿積度定鈐
置天正冬至宿黃道度及分加入其宿距至後黃道積
度及分共得為天正冬至宿黃道定積度以各宿黃道
度累加之即各得其宿黃道定積度
按分至每歲有差黃道因之而易即不能每歲步之
當於六十六年歲差一度時更定度鈐始為無弊也
凡冬至所在宿皆有前後距其黃道皆減於赤道今
所推其宿至後積度是自冬至日躔後距其宿末
度黃道數其天正黃道宿度則是自冬至日躔前距
其宿初度黃道數也合二數為其宿初度距其末度
總數故即命為天正宿定積度也於是以各宿黃道
度累加之即所得其宿所距天正宿初度之數而命
為定積度也
求日月食甚宿次黃道度及分秒法同通軌
又術置所推食甚盈縮歷縮歷加半周天為黃道定積
度月食盈縮歷俱加半周天滿周天分去之為黃道定
積度皆逕以距天正黃道積度相挨者減之即各得日
月食甚黃道宿度及分秒
按此法不用定積度鈐故亦不加天正黃道度然必
每年步定黃道積度方可用之也
赤道宿度
角十一度(一)亢九度(二)氐十六度(三)房五度(六)
心六度(五)尾十九度(一)箕一十度(四)
右東方七宿七十九度二十分
斗廿五度(二)牛七度(二)女十一度(三五)虚八度(九五太)
危十五度(四)室十七度(一)壁八度(六)
右北方七宿九十三度八十分太
奎十六度(六)婁十一度(八)胃十五度(六)昴十一度(三)
畢十七度(四)觜度(五)參十一度(一)
右西方七宿八十三度八十五分
井三十三度(三)鬼二度(二)柳十三度(三)星六度(三)
張十七度(二五)翼十八度(七五)軫十七度(三)
右南方七宿一百八度四十分
黃赤道立成
歷算全書卷二十三
